!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){d.getItem(s.CARDSETS).then(function(e){if(!e)return console.log("Cardsets storage doesn't exist, creating new storage space..."),d.setItem(s.CARDSETS,new Map)}).then(function(){d.getItem(s.HIGHSCORES).then(function(e){if(!e)return console.log("Highscores storage spaces doesn't exist, creating storage space..."),d.setItem(s.HIGHSCORES,[])})}).catch(function(e){throw Error("Failed to initialize cardset storage space")})},t.setHighscoresArr=function(e){return d.setItem(s.HIGHSCORES,e)},t.pGetAllCardsets=f,t.pUpdateCardset=h,t.pRenameCardset=function(e,t){return f().then(function(e,t){return function(n){if(!t.isValid())throw Error(l.INVALID_NAME_CATEGORY);var r=n.get(e);return n.delete(e),n.set(t.name,r),n.forEach(function(n){n.name===e&&(n.name=t.name,n.category=t.category,n.cards.forEach(function(e){e.id=t.name+"-"+e.id.split("-")[1]}))}),n}}(e,t)).then(function(e){return v(e)}).then(function(t){return Promise.resolve("Successfully edited the cardset ".concat(e,"!"))}).catch(function(t){throw console.error(t),Error("Failed to update name and category of the cardset ".concat(e))})},t.pAddHighscore=function(e){return d.getItem(s.HIGHSCORES).then(function(t){if(!t)throw Error("There is no highscore object in the database!");return t.push(e),t}).then(function(e){return d.setItem(s.HIGHSCORES,e)}).then(function(){return Promise.resolve("Successfully added highscore entry!")})},t.rebuildHighscores=p,t.pGetAllHighscores=function(){return d.getItem(s.HIGHSCORES).then(function(e){return p(e)}).catch(function(e){throw Error("Failed to get all highscores!")})},t.pSetCardsetMap=v,t.pAddUpdateCardset=m,t.pAddCardset=function(e){return f().then(function(t){if(!e.isValid())throw Error(l.INVALID_CARDSET);var n,r,a=t.values(),i=!0,c=!1,s=void 0;try{for(var u,d=a[Symbol.iterator]();!(i=(u=d.next()).done);i=!0){var f=u.value;if(n=f,r=e,(0,o.isEqualToCaseInsensitive)(n.name,r.name))throw Error(l.CARDSET_ALREADY_EXISTS)}}catch(e){c=!0,s=e}finally{try{i||null==d.return||d.return()}finally{if(c)throw s}}return e}).then(function(e){return m(e)})},t.pDeleteCardFromCardset=function(e){return g(e.split("-")[0]).then(function(t){return t.cards=t.cards.filter(function(t){return t.id!==e}),t}).then(function(e){return m(e)}).catch(function(e){throw Error(l.DELETE_CARD_FROM_CARDSET_FAIL)})},t.pDeleteCardset=function(e){return f().then(function(t){return t.delete(e),d.setItem(s.CARDSETS,t),t})},t.pAddCardToCardset=function(e,t){return g(t).then(function(t){if(!e.isValid())throw Error(l.INVALID_CARD_DETAILS);return e.id=t.name+"-"+t.cards.length,t.addCard(e),t}).then(function(e){return m(e)}).then(function(){return Promise.resolve("Sucessfully added card to the ".concat(t," cardset!"))})},t.pUpdateCard=function(e){if(!e.id)throw Error("Card does not have an ID set!");return g(e.id.split("-")[0]).then(function(t){return t.cards=t.cards.filter(function(t){return t.id!==e.id}),t.cards.push(e),t}).then(function(e){return h(e)}).then(function(){return Promise.resolve("Successfully updated the card ".concat(e.title,"!"))}).catch(function(e){throw Error("Failed to update card!")})},t.pGetCardByID=function(e){return g(e.split("-")[0]).then(function(t){return t.cards.filter(function(t){return t.id===e})[0]}).catch(function(e){throw Error(l.GET_CARD_BY_ID_FAIL)})},t.pGetCardset=g,t.postData=function(e){return fetch(e,{headers:{"content-type":"application/x-www-form-urlencoded"},method:"POST"}).then(function(e){return e.json()})},t.pFileReader=function(e){var t=this;return new Promise(function(n,r){var o=new FileReader;o.onload=function(t){e.data=t.target.result,n(e)},o.onerror=function(){return r(t)},/^image/.test(e.type)?o.readAsDataURL(e):o.readAsText(e)})},t.storageSavePicture=function(e){try{localStorage.setItem(u.PICTURE,JSON.stringify(e))}catch(e){if(1014===e.code||22===e.code)throw Error("File size too big, please upload a smaller file!");throw Error("Failed to upload file, please try again!")}},t.storageGetLoadedPicture=function(){try{return JSON.parse(localStorage.getItem(u.PICTURE))}catch(e){throw new Error("Failed to get picture!")}},t.storageClearPictureData=function(){try{localStorage.removeItem(u.PICTURE)}catch(e){throw Error("Failed to remove the picture from storage!")}},t.startCurrentGame=function(e){return g(e.toString()).then(function(t){if(0===t.cards.length)throw Error("Cardset ".concat(e," has no cards!"));return e}).then(function(t){return d.setItem(u.GAME,e.toString())})},t.getCurrentGame=function(){return d.getItem(u.GAME)},t.getCurrentCard=function(){return d.getItem(u.CARD)},t.getSettings=function(){return window.localStorage?JSON.parse(localStorage.getItem(u.SETTINGS)):null},t.saveSettings=function(e){window.localStorage?(localStorage.setItem(u.SETTINGS,JSON.stringify(e)),(0,a.showToast)("Successfully saved settings!","")):(0,a.showToast)("Settings are not supported by your browser!","")},t.setCurrentEditedCardset=function(e){sessionStorage.setItem(u.CURRENT_CARDSET,e)},t.KEYS=void 0;var r,o=n(2),a=n(1),i=n(3),c=(r=n(6))&&r.__esModule?r:{default:r};var s={STORE:"cardStorage",CARDSETS:"cardSets",HIGHSCORES:"highscores"},u={PICTURE:"cardPicture",GAME:"currentGame",CARD:"editCard",SETTINGS:"settings",USERNAME:"username",CURRENT_CARDSET:"currentCardset"};t.KEYS=u;var l={INVALID_NAME_CATEGORY:"Please enter a valid name and category!",INVALID_CARDSET:"The cardset name or category is not valid!",INVALID_CARD_DETAILS:"The card details are not valid!",CARDSET_ALREADY_EXISTS:"A cardset with the same name already exists!",CARD_DB_FAIL:"Failed to get card from the database!",CARD_ADD_FAIL:"Failed to add card to cardset!",CARDSET_ADD_FAIL:"Failed to add cardset to the database!",DELETE_CARD_FROM_CARDSET_FAIL:"Failed to delete card from the cardset!",STORE_SETTINGS:"Failed to store settings!",LOAD_SETTINGS:"Failed to load settings from the database!",GET_CARD_BY_ID_FAIL:"Failed to get card by ID!"},d=c.default.createInstance({name:s.STORE});function f(){return d.getItem(s.CARDSETS).then(function(e){return e?(e.forEach((t=e,function(e,n){var r=Object.assign(new i.CardSet,e);r.cards=r.cards.map(function(e){return Object.assign(new i.Card,e)}),t.set(n,r)})),e):new Map;var t}).catch(function(e){throw Error("Failed to retrieve all cardsets!")})}function h(e){return f().then(function(t){return t.set(e.name,e),t}).then(function(e){return v(e)}).then(function(t){return Promise.resolve("Successfully updated the cardset ".concat(e.name,"!"))}).catch(function(t){throw console.error(t),Error("Failed to update the cardset ".concat(e.name,"!"))})}function p(e){return e.map(function(e){return Object.assign(new i.Highscore,e)})}function v(e){return d.setItem(s.CARDSETS,e)}function m(e){return f().then(function(t){return t.set(e.name,e),d.setItem(s.CARDSETS,t)}).then(function(){return Promise.resolve("Successfully added the ".concat(e.name," cardset!"))}).catch(function(e){throw Error(l.CARDSET_ADD_FAIL)})}function g(e){return f().then(function(t){return t.get(e)?t.get(e):null}).catch(function(e){throw Error(l.CARD_DB_FAIL)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadingSpinner=function(){return $('<div class="preloader-background">\n        <div class="preloader-wrapper active">\n            <div class="spinner-layer spinner-blue-only">\n                <div class="circle-clipper left">\n                    <div class="circle"></div>\n                </div>\n                <div class="gap-patch">\n                    <div class="circle"></div>\n                </div>\n                <div class="circle-clipper right">\n                    <div class="circle"></div>\n                </div>\n            </div>\n        </div>\n    </div>')},t.generateModal=function(e,t,n,r,o,i){(function(e,t,n,r){var o='<div id="'.concat(e,'" class="modal">\n                    <div class="modal-content">\n                        ').concat(t,'\n                    </div>\n                    <div class="modal-footer">\n                        <a href="#/" id="modal-').concat(e,"-").concat(n,'" class="modal-close waves-effect waves-green btn-flat btn1">').concat(n,'</a>\n                        <a href="#/" id="modal-').concat(e,"-").concat(r,'" class="modal-close waves-effect waves-green btn-flat btn2">').concat(r,"</a>\n                    </div>\n                </div>");$("body").append($(o))})(e,t,n,r),$("#modal-".concat(e,"-").concat(r)).on("click",o),$("#modal-".concat(e,"-").concat(n)).on("click",i);var c=$("#".concat(e));M.Modal.init(c[0],{onCloseEnd:a,preventScrolling:!0}),c.modal("open")},t.object2options=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+='<option value="'.concat(n,'">').concat(e[n],"</option>"));return t},t.updateGameCardLayout=function(e){var t=e.getCurrentCard();$(".card-name").text(t.title),$(".card-qa").text(e.isFront?t.question:t.answer),$(".card-side").text(e.isFront?r.FRONT:r.BACK),$(".gameCardsAnswered").text("Answered: ".concat(e.getAnsweredCards().length,"/").concat(e.cardset.cards.length)),$(".gameCardsCorrectlyAnswered").text("Correct: ".concat(e.getCorrectCards().length,"/").concat(e.cardset.cards.length)),$(".currentCard").text("".concat(e.currentCardIndex+1,"/").concat(e.cardset.cards.length)),function(e){var t=e.getCurrentCard(),n=$(".smiley");n.removeClass("faint-black").removeClass("green-text").removeClass("red-text");var r="faint-black",o="sentiment_neutral";e.hasBeenAnswered(t)&&e.hasBeenCorrectlyAnswered(t)?(o="sentiment_very_satisfied",r="green-text"):e.hasBeenAnswered(t)&&(o="sentiment_very_dissatisfied",r="red-text");n.text(o).addClass(r)}(e),i=e.hasBeenAnswered(t),$(".answerControls").find(".btn").each(function(){i?$(this).addClass("disabled"):$(this).removeClass("disabled")}),$("#game-type-answer").prop("disabled",i),function(e){var t=e.getCurrentCard();$(".card-play-image").remove();var n=$(".card-content .img-wrapper");t.image&&e.isFront&&n.append(function(e){return $('<img class="card-play-image responsive-img" src="'.concat(e.image?e.image.data:"",'" alt="').concat(e.title,'-image">'))}(t))}(e),n=t,a=$(".answerControls"),a.find(".control").addClass("hidden"),a.find(o[n.typeAnswer?"TA":n.type]).removeClass("hidden"),"MC"===n.type&&function(e){$(".radioAnswerButtons").html(function(e){var t="";return e.isMultipleChoice()&&e.answerChoices.forEach(function(e,n){t+='<label class="btn-block">\n                            <input value="'.concat(n,'" class="with-gap" name="radioAnswer" type="radio" />\n                            <span>').concat(e,"</span>\n                        </label>")}),t}(e))}(n);var n,a;var i},t.showToast=function(e,t){M.toast({html:e,classes:t})};var r={CHOOSE_CARDSET:"Choose a cardset",NO_CARDSETS:"No cardsets have been created yet!",FRONT:"FRONT",BACK:"BACK",OFFLINE:"Currently working offline!"};var o={SA:".singleAnswerControls",TF:".trueFalseControls",MC:".multipleChoiceControls",TA:".typeAnswerControls"};function a(){$(this)[0].$el.remove()}},function(e,t,n){"use strict";function r(e,t){return"string"==typeof e&&"string"==typeof t?e.toLowerCase()===t.toLowerCase():e===t}function o(e){return"string"==typeof e?e.toLowerCase():e}Object.defineProperty(t,"__esModule",{value:!0}),t.isEmpty=function(e){if(null===e||void 0===e)return!0;if("string"==typeof e)return 0===$.trim(e).length;return!1},t.isEqualToCaseInsensitive=r,t.isInArrayLowerCase=function(e,t){return e.some(function(e){return r(e,t)})},t.removeDuplicatesArray=function(e){return function(e){var t=e.length;for(;t>0;){var n=Math.floor(Math.random()*t),r=e[--t];e[t]=e[n],e[n]=r}return e}(e.map(o).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]))},t.getUniqueValuesOfObjectsInMap=function(e,t){var n=[];return e.forEach(function(e){n.indexOf(e[t])<0&&n.push(e[t])}),n},t.scrollToBottom=function(){$("html,body").animate({scrollTop:document.body.scrollHeight},"fast")},t.cardsetNameComparator=function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0},t.validateSelect=function(){$("select[required]").css({display:"block",height:0,padding:0,width:0,position:"absolute"})},t.getSelectOptionByName=function(e){return $('select[name="'.concat(e,'"]')).find("option:selected").val()},t.isOnline=function(){return navigator.onLine},t.fDefault=function(e){return void e.preventDefault()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Card=s,t.Game=u,t.CardSet=l,t.Image=function(e,t){this.name=e,this.data=t},t.Highscore=d;var r=n(2),o=n(1),a=n(0),i=n(4),c={SA:"Single Answer",TF:"True or False",MC:"Multiple Choice"};function s(e,t,n,r){this.id=null,this.title=e,this.type=t,this.question=n,this.image=null,this.answer=r,this.guess=null,this.answerChoices=null,this.typeAnswer=!1}function u(e){this.cardset=e,this.currentCardIndex=0,this.isFront=!0,this.timeFinished=null}function l(e,t){this.name=e,this.category=t,this.cards=[]}function d(e,t,n,r){this.date=n,this.realTime=r,this.game=e}s.prototype.clearGuess=function(){this.guess=null},u.prototype.reset=function(){this.currentCardIndex=0,this.isFront=!0,this.timeFinished=null,this.cardset.cards.forEach(function(e){return e.clearGuess()})},u.prototype.nextCard=function(){this.cardset.cards.length>0&&(this.currentCardIndex+1<=this.cardset.cards.length-1?this.currentCardIndex++:this.currentCardIndex=0)},u.prototype.prevCard=function(){this.cardset.cards.length>0&&(this.currentCardIndex-1>=0?this.currentCardIndex--:this.currentCardIndex=this.cardset.cards.length-1)},u.prototype.answer=function(e){this.getCurrentCard().guess=e},u.prototype.isFinished=function(){return this.getAmountCards()===this.getAnsweredCards().length},u.prototype.getCorrectCards=function(){return this.getAnsweredCards().filter(function(e){return!0===e.isCorrectAnswer()})},u.prototype.getAmountCorrectAnswers=function(){return this.getCorrectCards().length},u.prototype.getAnswerAccuracy=function(){return Math.round(this.getCorrectCards().length/this.cardset.cards.length*100)},u.prototype.getAmountWrongAnswers=function(){return this.getAmountCards()-this.getAmountCorrectAnswers()},u.prototype.getAmountCards=function(){return this.cardset.cards.length},u.prototype.getAnsweredCards=function(){return this.cardset.cards.filter(function(e){return null!==e.guess})},u.prototype.hasBeenCorrectlyAnswered=function(e){return this.getCorrectCards().filter(function(t){return t.id===e.id}).length>0},u.prototype.hasBeenAnswered=function(e){return this.getAnsweredCards().filter(function(t){return t.id===e.id}).length>0},u.prototype.getCurrentCard=function(){return this.cardset.cards[this.currentCardIndex]},s.prototype.renderCompact=function(){return'<div id="'.concat(this.id,'" data-card="').concat(this.id,'" class="card">\n                <a href="#" class="faint-black delete-card-collection-item"><i class="delete material-icons">delete</i></a>\n                <a href="#/" class="faint-black edit-card-collection-item"><i class="edit material-icons">edit</i></a>\n                ').concat(this.image?'<a href="#" class="faint-black image-card-collection-item"><i class="photo material-icons">photo</i></a>':"",'\n                <div class="card-content">\n                    <span class="card-title compact-title">').concat(this.title,"</span>\n                    <p>Q: ").concat(this.question,'</p>\n                    <p class="answer">A: ').concat(this.answer,'</p>\n                    <p class="answers">').concat(this.isMultipleChoice()?'<p class="choices">'.concat(this.answerChoices.join(","),"</p>"):"",'</p>\n                    <p class="type">').concat(c[this.type],'</p>\n                    <p class="typing type keyboard">').concat(this.typeAnswer?'<i class="material-icons">keyboard</i>':"","</p>\n                </div>   \n            </div>")},s.prototype.render=function(){var e='<div id="'.concat(this.id,'" class="card">\n                               <a href="#/" class="faint-black delete-card-collection-item"><i class="delete material-icons">delete</i></a>\n                               <a href="#/" class="faint-black edit-card-collection-item"><i class="edit material-icons">edit</i></a>\n                               <div class="card-content">\n                                    <span class="card-title">').concat(this.title,"</span>");return this.image&&(e+='<div class="center">\n                                  <img class="responsive-img" src="'.concat(this.image.data,'" alt="card-image" title="card-image"">\n                           </div>')),e+="<p>Q: ".concat(this.question,'</p>\n                                </div>\n                                <div class="card-action">\n                                    <p class="answer">A: ').concat(this.answer,'</p>\n                                    <p class="answers">').concat(this.isMultipleChoice()?'<p class="choices">\n                                                                '.concat(this.answerChoices.join(","),"\n                                                                </p>"):"",'</p>\n                                    <p class="type">').concat(c[this.type],'</p>\n                                    <p class="typing type keyboard">').concat(this.typeAnswer?'<i class="material-icons">keyboard</i>':"","</p>\n                                </div>\n                            </div>")},s.prototype.isCorrectAnswer=function(){return(0,r.isEqualToCaseInsensitive)(this.answer,this.guess)},s.prototype.isMultipleChoice=function(){return"MC"===this.type||Array.isArray(this.answerChoices)},s.prototype.isValid=function(){return!((0,r.isEmpty)(this.title)||(0,r.isEmpty)(this.type)||(0,r.isEmpty)(this.question)||(0,r.isEmpty)(this.answer))},l.prototype.addCard=function(e){this.cards.push(e)},l.prototype.render=function(){var e='\n                <section class="cardset" data-cardset="'.concat(this.name,'" data-category="').concat(this.category,'">\n                    <ul class="collapsible">\n                        <li ').concat((0,i.startsCollapsed)()?"":'class="active"','>\n                    <div class="collapsible-header">\n                    <i class="material-icons">folder</i>').concat(this.name,'\n                    <a href="#/" class="faint-black home-hide-cardset"><i class="material-icons">arrow_drop_up</i></a>\n\n                    <div class="collapsible-items">\n                        <a href="#/" class="faint-black home-add-cardset"><i class="material-icons">add</i></a>\n                        <a href="#/" class="faint-black home-edit-cardset"><i class="material-icons">edit</i></a>\n                        <a href="#/" class="faint-black home-delete-cardset"><i class="material-icons">delete</i></a>\n                        <a href="#/" class="faint-black home-play-cardset"><i class="material-icons">play_arrow</i></a>\n                    </div>\n                        \n                  \n                </div>\n                <div class="collapsible-body">');return this.cards.forEach(function(t){return e+=(0,i.isCompactViewEnabled)()?t.renderCompact():t.render()}),0===this.cards.length&&(e+='<span class="center">No cards have been added yet, tap the <i class="material-icons">add</i> button to add a card!</span>'),e+="</div>\n                       </li>\n                    </ul>\n                </section>"},l.prototype.isValid=function(){return!(0,r.isEmpty)(this.name)&&!(0,r.isEmpty)(this.category)},d.prototype.save=function(e){(0,a.pAddHighscore)(this).then(e).catch(function(e){(0,o.showToast)(e,"")})},d.prototype.render=function(){var e="<tr>\n            <td>".concat(this.game.cardset.name,"</td>\n            <td>").concat(this.game.timeFinished,"</td>\n            <td>").concat(this.date.slice(0,-5)," ").concat(this.realTime.slice(0,-3),"</td>\n            <td></td>\n            <td></td>\n            <td></td>\n        </tr>");return this.game.cardset.cards.forEach(function(t){e+="<tr>\n                <td></td>\n                <td>".concat((0,r.isEqualToCaseInsensitive)(t.guess,t.answer)?'<i class="material-icons">check</i>':'<i class="material-icons">close</i>',"</td>\n                <td></td>\n                <td>").concat(t.title,"</td>\n                <td>").concat(t.guess,"</td>\n                <td>").concat(t.answer,"</td>\n            </tr>")}),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){e=(0,a.getSettings)(),e&&e.forEach(function(e){return $("input[name='".concat(e.name,"']")).prop("checked",e.value)}),$(".form-save-settings").on("submit",p),$(".btn-clear-highscores").on("click",u).next().on("click",l).next().on("click",s);var e},t.startsCollapsed=function(){return(0,a.getSettings)()&&(0,a.getSettings)().filter(function(e){return e.name===i.START_COLLAPSED}).length>0},t.isCompactViewEnabled=function(){return(0,a.getSettings)()&&(0,a.getSettings)().filter(function(e){return e.name===i.COMPACT_VIEW}).length>0};var r=n(1),o=n(2),a=n(0),i={START_COLLAPSED:"startCollapsed",COMPACT_VIEW:"compactViewEnabled"},c={DELETE_ALL_DATA:"Are you sure you wish to clear all data? This includes all highscore data and all card related data such as all cardsets and cards!",DELETE_HIGHSCORE_DATA:"Are you sure you wish to clear all highscore related data?",DELETE_CARD_DATA:"Are you sure you wish to clear all card related data? This includes all cardsets and cards in these cardsets"};function s(e){e.preventDefault();var t="<p>".concat(c.DELETE_ALL_DATA,"</p>");(0,r.generateModal)("clearAllDataModal",t,"Cancel","Confirm",h,o.fDefault)}function u(e){e.preventDefault();var t="<p>".concat(c.DELETE_HIGHSCORE_DATA,"</p>");(0,r.generateModal)("clearAllDataModal",t,"Cancel","Confirm",d,o.fDefault)}function l(e){e.preventDefault();var t="<p>".concat(c.DELETE_CARD_DATA,"</p>");(0,r.generateModal)("clearAllDataModal",t,"Cancel","Confirm",f,o.fDefault)}function d(e){e.preventDefault(),(0,a.setHighscoresArr)([]).then(function(){(0,r.showToast)("Successfully cleared all highscore data!","")}).catch(function(e){(0,r.showToast)("Failed to clear highscore data!","")})}function f(e){e.preventDefault(),(0,a.pSetCardsetMap)(new Map).then(function(){(0,r.showToast)("Successfully cleared all card data!","")}).catch(function(){(0,r.showToast)("Failed to clear card data!","")})}function h(e){e.preventDefault(),f(e),d(e)}function p(e){e.preventDefault(),(0,a.saveSettings)($(this).serializeArray())}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";(function(n){var r,o,a,i,c;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
    localForage -- Offline Storage, Improved
    Version 1.7.1
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/c=function(){return function e(t,n,r){function o(c,s){if(!n[c]){if(!t[c]){if(!s&&("function"==typeof i&&i))return i(c,!0);if(a)return a(c,!0);var u=new Error("Cannot find module '"+c+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[c]={exports:{}};t[c][0].call(l.exports,function(e){return o(t[c][1][e]||e)},l,l.exports,e,t,n,r)}return n[c].exports}for(var a="function"==typeof i&&i,c=0;c<r.length;c++)o(r[c]);return o}({1:[function(e,t,r){(function(e){function n(){u=!0;for(var e,t,n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}u=!1}var r,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var a=0,i=new o(n),c=e.document.createTextNode("");i.observe(c,{characterData:!0}),r=function(){c.data=a=++a%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){n(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(n,0)};else{var s=new e.MessageChannel;s.port1.onmessage=n,r=function(){s.port2.postMessage(0)}}var u,l=[];t.exports=function(e){1!==l.push(e)||u||r()}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){function r(){}function o(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,e!==r&&u(this,e)}function a(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function i(e,t,n){d(function(){var r;try{r=t(n)}catch(t){return f.reject(e,t)}r===e?f.reject(e,new TypeError("Cannot resolve promise with itself")):f.resolve(e,r)})}function c(e){var t=e&&e.then;if(e&&"object"==s(e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function u(e,t){function n(t){o||(o=!0,f.reject(e,t))}function r(t){o||(o=!0,f.resolve(e,t))}var o=!1,a=l(function(){t(r,n)});"error"===a.status&&n(a.value)}function l(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}var d=e(1),f={},h=["REJECTED"],p=["FULFILLED"],v=["PENDING"];t.exports=n=o,o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){if("function"!=typeof e&&this.state===p||"function"!=typeof t&&this.state===h)return this;var n=new this.constructor(r);return this.state!==v?i(n,this.state===p?e:t,this.outcome):this.queue.push(new a(n,e,t)),n},a.prototype.callFulfilled=function(e){f.resolve(this.promise,e)},a.prototype.otherCallFulfilled=function(e){i(this.promise,this.onFulfilled,e)},a.prototype.callRejected=function(e){f.reject(this.promise,e)},a.prototype.otherCallRejected=function(e){i(this.promise,this.onRejected,e)},f.resolve=function(e,t){var n=l(c,t);if("error"===n.status)return f.reject(e,n.value);var r=n.value;if(r)u(e,r);else{e.state=p,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},f.reject=function(e,t){e.state=h,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},n.resolve=function(e){return e instanceof this?e:f.resolve(new this(r),e)},n.reject=function(e){var t=new this(r);return f.reject(t,e)},n.all=function(e){function t(e,t){n.resolve(e).then(function(e){i[t]=e,++c!==o||a||(a=!0,f.resolve(u,i))},function(e){a||(a=!0,f.reject(u,e))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var o=e.length,a=!1;if(!o)return this.resolve([]);for(var i=new Array(o),c=0,s=-1,u=new this(r);++s<o;)t(e[s],s);return u},n.race=function(e){function t(e){n.resolve(e).then(function(e){a||(a=!0,f.resolve(c,e))},function(e){a||(a=!0,f.reject(c,e))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var o=e.length,a=!1;if(!o)return this.resolve([]);for(var i=-1,c=new this(r);++i<o;)t(e[i]);return c}},{1:1}],3:[function(e,t,r){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){function r(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}function o(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function a(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function i(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function c(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function u(e){return"boolean"==typeof F?N.resolve(F):function(e){return new N(function(t){var n=e.transaction(x,L),o=r([""]);n.objectStore(x).put(o,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1})}(e).then(function(e){return F=e})}function l(e){var t=j[e.name],n={};n.promise=new N(function(e,t){n.resolve=e,n.reject=t}),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then(function(){return n.promise}):t.dbReady=n.promise}function d(e){var t=j[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function f(e,t){var n=j[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function h(e,t){return new N(function(n,r){if(j[e.name]=j[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return n(e.db);l(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var a=O.open.apply(O,o);t&&(a.onupgradeneeded=function(t){var n=a.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(x)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),a.onerror=function(e){e.preventDefault(),r(a.error)},a.onsuccess=function(){n(a.result),d(e)}})}function p(e){return h(e,!1)}function v(e){return h(e,!0)}function m(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||n){if(n){var a=e.db.version+1;a>e.version&&(e.version=a)}return!0}return!1}function g(e){return r([function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}(atob(e.data))],{type:e.type})}function y(e){return e&&e.__local_forage_encoded_blob}function b(e){var t=this,n=t._initReady().then(function(){var e=j[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return a(n,e,e),n}function w(e,t,n,r){void 0===r&&(r=1);try{var o=e.db.transaction(e.storeName,t);n(null,o)}catch(o){if(r>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return N.resolve().then(function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),v(e)}).then(function(){return function(e){l(e);for(var t=j[e.name],n=t.forages,r=0;r<n.length;r++){var o=n[r];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,p(e).then(function(t){return e.db=t,m(e)?v(e):t}).then(function(r){e.db=t.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r}).catch(function(t){throw f(e,t),t})}(e).then(function(){w(e,t,n,r-1)})}).catch(n);n(o)}}function C(e){var t,n,r,o,a,i=.75*e.length,c=e.length,s=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var u=new ArrayBuffer(i),l=new Uint8Array(u);for(t=0;t<c;t+=4)n=P.indexOf(e[t]),r=P.indexOf(e[t+1]),o=P.indexOf(e[t+2]),a=P.indexOf(e[t+3]),l[s++]=n<<2|r>>4,l[s++]=(15&r)<<4|o>>2,l[s++]=(3&o)<<6|63&a;return u}function S(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=P[n[t]>>2],r+=P[(3&n[t])<<4|n[t+1]>>4],r+=P[(15&n[t+1])<<2|n[t+2]>>6],r+=P[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function _(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function E(e,t,n,r,o,a){e.executeSql(n,r,o,function(e,i){i.code===i.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[name],function(e,c){c.rows.length?a(e,i):_(e,t,function(){e.executeSql(n,r,o,a)},a)},a):a(e,i)},a)}function A(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function I(){return!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}()||localStorage.length>0}function D(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function T(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(se(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var R="function"==typeof Symbol&&"symbol"==s(Symbol.iterator)?function(e){return s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":s(e)},O=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();"undefined"==typeof Promise&&e(3);var N=Promise,x="local-forage-detect-blob-support",F=void 0,j={},k=Object.prototype.toString,M="readonly",L="readwrite",$={_driver:"asyncStorage",_initStorage:function(e){function t(){return N.resolve()}var n=this,r={db:null};if(e)for(var o in e)r[o]=e[o];var a=j[r.name];a||(a={forages:[],db:null,dbReady:null,deferredOperations:[]},j[r.name]=a),a.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=b);for(var i=[],c=0;c<a.forages.length;c++){var s=a.forages[c];s!==n&&i.push(s._initReady().catch(t))}var u=a.forages.slice(0);return N.all(i).then(function(){return r.db=a.db,p(r)}).then(function(e){return r.db=e,m(r,n._defaultConfig.version)?v(r):e}).then(function(e){r.db=a.db=e,n._dbInfo=r;for(var t=0;t<u.length;t++){var o=u[t];o!==n&&(o._dbInfo.db=r.db,o._dbInfo.version=r.version)}})},_support:function(){try{if(!O)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=new N(function(t,r){n.ready().then(function(){w(n._dbInfo,M,function(o,a){if(o)return r(o);try{var i=a.objectStore(n._dbInfo.storeName).openCursor(),c=1;i.onsuccess=function(){var n=i.result;if(n){var r=n.value;y(r)&&(r=g(r));var o=e(r,n.key,c++);void 0!==o?t(o):n.continue()}else t()},i.onerror=function(){r(i.error)}}catch(e){r(e)}})}).catch(r)});return o(r,t),r},getItem:function(e,t){var n=this;e=i(e);var r=new N(function(t,r){n.ready().then(function(){w(n._dbInfo,M,function(o,a){if(o)return r(o);try{var i=a.objectStore(n._dbInfo.storeName).get(e);i.onsuccess=function(){var e=i.result;void 0===e&&(e=null),y(e)&&(e=g(e)),t(e)},i.onerror=function(){r(i.error)}}catch(e){r(e)}})}).catch(r)});return o(r,t),r},setItem:function(e,t,n){var r=this;e=i(e);var a=new N(function(n,o){var a;r.ready().then(function(){return a=r._dbInfo,"[object Blob]"===k.call(t)?u(a.db).then(function(e){return e?t:function(e){return new N(function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)})}(t)}):t}).then(function(t){w(r._dbInfo,L,function(a,i){if(a)return o(a);try{var c=i.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var s=c.put(t,e);i.oncomplete=function(){void 0===t&&(t=null),n(t)},i.onabort=i.onerror=function(){var e=s.error?s.error:s.transaction.error;o(e)}}catch(e){o(e)}})}).catch(o)});return o(a,n),a},removeItem:function(e,t){var n=this;e=i(e);var r=new N(function(t,r){n.ready().then(function(){w(n._dbInfo,L,function(o,a){if(o)return r(o);try{var i=a.objectStore(n._dbInfo.storeName).delete(e);a.oncomplete=function(){t()},a.onerror=function(){r(i.error)},a.onabort=function(){var e=i.error?i.error:i.transaction.error;r(e)}}catch(e){r(e)}})}).catch(r)});return o(r,t),r},clear:function(e){var t=this,n=new N(function(e,n){t.ready().then(function(){w(t._dbInfo,L,function(r,o){if(r)return n(r);try{var a=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=a.error?a.error:a.transaction.error;n(e)}}catch(e){n(e)}})}).catch(n)});return o(n,e),n},length:function(e){var t=this,n=new N(function(e,n){t.ready().then(function(){w(t._dbInfo,M,function(r,o){if(r)return n(r);try{var a=o.objectStore(t._dbInfo.storeName).count();a.onsuccess=function(){e(a.result)},a.onerror=function(){n(a.error)}}catch(e){n(e)}})}).catch(n)});return o(n,e),n},key:function(e,t){var n=this,r=new N(function(t,r){e<0?t(null):n.ready().then(function(){w(n._dbInfo,M,function(o,a){if(o)return r(o);try{var i=a.objectStore(n._dbInfo.storeName),c=!1,s=i.openCursor();s.onsuccess=function(){var n=s.result;n?0===e?t(n.key):c?t(n.key):(c=!0,n.advance(e)):t(null)},s.onerror=function(){r(s.error)}}catch(e){r(e)}})}).catch(r)});return o(r,t),r},keys:function(e){var t=this,n=new N(function(e,n){t.ready().then(function(){w(t._dbInfo,M,function(r,o){if(r)return n(r);try{var a=o.objectStore(t._dbInfo.storeName).openCursor(),i=[];a.onsuccess=function(){var t=a.result;t?(i.push(t.key),t.continue()):e(i)},a.onerror=function(){n(a.error)}}catch(e){n(e)}})}).catch(n)});return o(n,e),n},dropInstance:function(e,t){t=c.apply(this,arguments);var n,r=this.config();if((e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName),e.name){var a=e.name===r.name&&this._dbInfo.db?N.resolve(this._dbInfo.db):p(e).then(function(t){var n=j[e.name],r=n.forages;n.db=t;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=t;return t});n=e.storeName?a.then(function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;l(e);var r=j[e.name],o=r.forages;t.close();for(var a=0;a<o.length;a++){var i=o[a];i._dbInfo.db=null,i._dbInfo.version=n}return new N(function(t,r){var o=O.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}}).then(function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,d(n._dbInfo)}}).catch(function(t){throw(f(e,t)||N.resolve()).catch(function(){}),t})}}):a.then(function(t){l(e);var n=j[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;return new N(function(t,n){var r=O.deleteDatabase(e.name);r.onerror=r.onblocked=function(e){var t=r.result;t&&t.close(),n(e)},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}).then(function(e){n.db=e;for(var t=0;t<r.length;t++)d(r[t]._dbInfo)}).catch(function(t){throw(f(e,t)||N.resolve()).catch(function(){}),t})})}else n=N.reject("Invalid arguments");return o(n,t),n}},P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",B="~~local_forage_type~",G=/^~~local_forage_type~([^~]+)~/,U="__lfsc__:",H=U.length,q="arbf",z="blob",V="si08",W="ui08",Y="uic8",K="si16",J="si32",Q="ur16",X="ui32",Z="fl32",ee="fl64",te=H+q.length,ne=Object.prototype.toString,re={serialize:function(e,t){var n="";if(e&&(n=ne.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===ne.call(e.buffer))){var r,o=U;e instanceof ArrayBuffer?(r=e,o+=q):(r=e.buffer,"[object Int8Array]"===n?o+=V:"[object Uint8Array]"===n?o+=W:"[object Uint8ClampedArray]"===n?o+=Y:"[object Int16Array]"===n?o+=K:"[object Uint16Array]"===n?o+=Q:"[object Int32Array]"===n?o+=J:"[object Uint32Array]"===n?o+=X:"[object Float32Array]"===n?o+=Z:"[object Float64Array]"===n?o+=ee:t(new Error("Failed to get type for BinaryArray"))),t(o+S(r))}else if("[object Blob]"===n){var a=new FileReader;a.onload=function(){var n=B+e.type+"~"+S(this.result);t(U+z+n)},a.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}},deserialize:function(e){if(e.substring(0,H)!==U)return JSON.parse(e);var t,n=e.substring(te),o=e.substring(H,te);if(o===z&&G.test(n)){var a=n.match(G);t=a[1],n=n.substring(a[0].length)}var i=C(n);switch(o){case q:return i;case z:return r([i],{type:t});case V:return new Int8Array(i);case W:return new Uint8Array(i);case Y:return new Uint8ClampedArray(i);case K:return new Int16Array(i);case Q:return new Uint16Array(i);case J:return new Int32Array(i);case X:return new Uint32Array(i);case Z:return new Float32Array(i);case ee:return new Float64Array(i);default:throw new Error("Unkown type: "+o)}},stringToBuffer:C,bufferToString:S},oe={_driver:"webSQLStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var o=new N(function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction(function(o){_(o,n,function(){t._dbInfo=n,e()},function(e,t){r(t)})},r)});return n.serializer=re,o},_support:"function"==typeof openDatabase,iterate:function(e,t){var n=this,r=new N(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){E(n,o,"SELECT * FROM "+o.storeName,[],function(n,r){for(var a=r.rows,i=a.length,c=0;c<i;c++){var s=a.item(c),u=s.value;if(u&&(u=o.serializer.deserialize(u)),void 0!==(u=e(u,s.key,c+1)))return void t(u)}t()},function(e,t){r(t)})})}).catch(r)});return o(r,t),r},getItem:function(e,t){var n=this;e=i(e);var r=new N(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){E(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),t(r)},function(e,t){r(t)})})}).catch(r)});return o(r,t),r},setItem:function(e,t,n){return function e(t,n,r,a){var c=this;t=i(t);var s=new N(function(o,i){c.ready().then(function(){void 0===n&&(n=null);var s=n,u=c._dbInfo;u.serializer.serialize(n,function(n,l){l?i(l):u.db.transaction(function(e){E(e,u,"INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[t,n],function(){o(s)},function(e,t){i(t)})},function(n){if(n.code===n.QUOTA_ERR){if(a>0)return void o(e.apply(c,[t,s,r,a-1]));i(n)}})})}).catch(i)});return o(s,r),s}.apply(this,[e,t,n,1])},removeItem:function(e,t){var n=this;e=i(e);var r=new N(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){E(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){r(t)})})}).catch(r)});return o(r,t),r},clear:function(e){var t=this,n=new N(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){E(t,r,"DELETE FROM "+r.storeName,[],function(){e()},function(e,t){n(t)})})}).catch(n)});return o(n,e),n},length:function(e){var t=this,n=new N(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){E(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,n){var r=n.rows.item(0).c;e(r)},function(e,t){n(t)})})}).catch(n)});return o(n,e),n},key:function(e,t){var n=this,r=new N(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){E(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)},function(e,t){r(t)})})}).catch(r)});return o(r,t),r},keys:function(e){var t=this,n=new N(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){E(t,r,"SELECT key FROM "+r.storeName,[],function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)},function(e,t){n(t)})})}).catch(n)});return o(n,e),n},dropInstance:function(e,t){t=c.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,a=this;return o(r=e.name?new N(function(t){var r;r=e.name===n.name?a._dbInfo.db:openDatabase(e.name,"","",0),t(e.storeName?{db:r,storeNames:[e.storeName]}:function(e){return new N(function(t,n){e.transaction(function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(n,r){for(var o=[],a=0;a<r.rows.length;a++)o.push(r.rows.item(a).name);t({db:e,storeNames:o})},function(e,t){n(t)})},function(e){n(e)})})}(r))}).then(function(e){return new N(function(t,n){e.db.transaction(function(r){function o(e){return new N(function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],function(){t()},function(e,t){n(t)})})}for(var a=[],i=0,c=e.storeNames.length;i<c;i++)a.push(o(e.storeNames[i]));N.all(a).then(function(){t()}).catch(function(e){n(e)})},function(e){n(e)})})}):N.reject("Invalid arguments"),t),r}},ae={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=A(e,this._defaultConfig),I()?(this._dbInfo=t,t.serializer=re,N.resolve()):N.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=n.ready().then(function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,a=localStorage.length,i=1,c=0;c<a;c++){var s=localStorage.key(c);if(0===s.indexOf(r)){var u=localStorage.getItem(s);if(u&&(u=t.serializer.deserialize(u)),void 0!==(u=e(u,s.substring(o),i++)))return u}}});return o(r,t),r},getItem:function(e,t){var n=this;e=i(e);var r=n.ready().then(function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r});return o(r,t),r},setItem:function(e,t,n){var r=this;e=i(e);var a=r.ready().then(function(){void 0===t&&(t=null);var n=t;return new N(function(o,a){var i=r._dbInfo;i.serializer.serialize(t,function(t,r){if(r)a(r);else try{localStorage.setItem(i.keyPrefix+e,t),o(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||a(e),a(e)}})})});return o(a,n),a},removeItem:function(e,t){var n=this;e=i(e);var r=n.ready().then(function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return o(r,t),r},clear:function(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}});return o(n,e),n},length:function(e){var t=this.keys().then(function(e){return e.length});return o(t,e),t},key:function(e,t){var n=this,r=n.ready().then(function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return o(r,t),r},keys:function(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var a=localStorage.key(o);0===a.indexOf(e.keyPrefix)&&r.push(a.substring(e.keyPrefix.length))}return r});return o(n,e),n},dropInstance:function(e,t){if(t=c.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,a=this;return o(r=e.name?new N(function(t){t(e.storeName?A(e,a._defaultConfig):e.name+"/")}).then(function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}}):N.reject("Invalid arguments"),t),r}},ie=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},ce=function(e,t){for(var n=e.length,r=0;r<n;){if(ie(e[r],t))return!0;r++}return!1},se=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},ue={},le={},de={INDEXEDDB:$,WEBSQL:oe,LOCALSTORAGE:ae},fe=[de.INDEXEDDB._driver,de.WEBSQL._driver,de.LOCALSTORAGE._driver],he=["dropInstance"],pe=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(he),ve={description:"",driver:fe.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},me=new(function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),de)if(de.hasOwnProperty(n)){var r=de[n],o=r._driver;this[n]=o,ue[o]||this.defineDriver(r)}this._defaultConfig=T({},ve),this._config=T({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":R(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new N(function(t,n){try{var r=e._driver,a=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(a);for(var i=pe.concat("_initStorage"),c=0,s=i.length;c<s;c++){var u=i[c];if((!ce(he,u)||e[u])&&"function"!=typeof e[u])return void n(a)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=N.reject(t);return o(n,arguments[arguments.length-1]),n}},n=0,r=he.length;n<r;n++){var a=he[n];e[a]||(e[a]=t(a))}}();var l=function(n){ue[r]&&console.info("Redefining LocalForage driver: "+r),ue[r]=e,le[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(l,n):l(!!e._support):l(!0)}catch(e){n(e)}});return a(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=ue[e]?N.resolve(ue[e]):N.reject(new Error("Driver not found."));return a(r,t,n),r},e.prototype.getSerializer=function(e){var t=N.resolve(re);return a(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return a(n,e,e),n},e.prototype.setDriver=function(e,t,n){function r(){i._config.driver=i.driver()}function o(e){return i._extend(e),r(),i._ready=i._initStorage(i._config),i._ready}var i=this;se(e)||(e=[e]);var c=this._getSupportedDrivers(e),s=null!==this._driverSet?this._driverSet.catch(function(){return N.resolve()}):N.resolve();return this._driverSet=s.then(function(){var e=c[0];return i._dbInfo=null,i._ready=null,i.getDriver(e).then(function(e){i._driver=e._driver,r(),i._wrapLibraryMethodsWithReady(),i._initDriver=function(e){return function(){var t=0;return function n(){for(;t<e.length;){var a=e[t];return t++,i._dbInfo=null,i._ready=null,i.getDriver(a).then(o).catch(n)}r();var c=new Error("No available storage method found.");return i._driverSet=N.reject(c),i._driverSet}()}}(c)})}).catch(function(){r();var e=new Error("No available storage method found.");return i._driverSet=N.reject(e),i._driverSet}),a(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!le[e]},e.prototype._extend=function(e){T(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=pe.length;e<t;e++)D(this,pe[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=me},{3:3}]},{},[4])(4)},"object"==s(t)&&void 0!==e?e.exports=c():(o=[],void 0===(a="function"==typeof(r=c)?r.apply(t,o):r)||(e.exports=a))}).call(this,n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){l(),(0,r.validateSelect)(),$(".form-add-card").on("submit",y),$(".link-check-form").on("click",f),$(".answer-false").on("click",h).next().on("click",h),$("select[name='card-types']").on("change",p),$("#input-card-picture").on("change",m),$(".btn-preview-card").on("click",g),$(".clear-loaded-image").on("click",b)},t.getCardFromInput=u,t.updateImageSpan=v;var r=n(2),o=n(3),a=n(0),i=n(1),c={SA:".singleAnswer",TF:".trueFalse",MC:".multipleChoice"},s={NO_CARDSETS:"No cardsets have been created yet!"};function u(){var e=$("#card-name").val(),t=function(e){switch(e){case"TF":return $(".trueFalse").find("a:not(.grey)").data("value");case"MC":return $.trim($("#card-answer-mc").val());case"SA":return $.trim($("#card-answer").val())}}((0,r.getSelectOptionByName)("card-types")),n=(0,r.getSelectOptionByName)("card-types"),i=$("#card-question").val(),c=new o.Card(e,n,i,t);return c.typeAnswer=$("#checkbox-type-answer").prop("checked"),c.image=JSON.parse(localStorage.getItem(a.KEYS.PICTURE)),c.isMultipleChoice()&&(c.answerChoices=function(e,t){var n=e.split(",").map(function(e){return $.trim(e)}).filter(function(e){return!(0,r.isEmpty)(e)});(0,r.isInArrayLowerCase)(n,t)||n.push(t);return(0,r.removeDuplicatesArray)(n)}($("#card-possible-mc").val(),t)),c}function l(){var e;(0,a.pGetAllCardsets)().then(d).then((e=$("select[name='available-cardsets']"),function(t){if(e.html(t),sessionStorage.getItem("currentCardset")){var n=sessionStorage.getItem("currentCardset");e.find("option").filter(function(e,t){$(t).val()===n&&$(t).prop("selected",!0)})}e.formSelect()}))}function d(e){var t="";return t+=0!==e.size?"":'<option value="" disabled selected>'.concat(s.NO_CARDSETS,"</option>"),e.forEach(function(e){t+='<option value="'.concat(e.name,'">').concat(e.name," (").concat(e.cards.length," cards)</option>")}),t}function f(e){e.preventDefault(),$(".btn-add-card").click()}function h(e){e.preventDefault(),$(this).toggleClass("grey"),$(this).siblings().hasClass("grey")||$(this).siblings().addClass("grey")}function p(e){var t,n;t=$(this).find("option:selected").val(),(n=$(".formAnswerInput")).find("input:not([type='checkbox']), select").prop("required",!1),n.find(".answerInput").addClass("hidden"),n.find(c[t]).removeClass("hidden").find("input:not([type='checkbox']), select").prop("required",!0)}function v(){var e=$("#imageName"),t=(0,a.storageGetLoadedPicture)();t?e.text(t.name).addClass("green-text").next().removeClass("hidden"):(e.removeClass("green-text").text("none"),e.next().addClass("hidden"))}function m(e){var t=$(this)[0].files[0];(0,a.pFileReader)(t).then(function(e){return new o.Image(e.name,e.data)}).then(function(e){(0,a.storageSavePicture)(e),v()}).catch(function(e){(0,i.showToast)(e,"")})}function g(e){e.preventDefault();var t=u();t.isValid()?function(e){var t="<h4>Preview</h4>\n                        ".concat(e.render());(0,i.generateModal)("previewModal",t,"","Close",r.fDefault,r.fDefault)}(t):(0,i.showToast)("All fields must be filled in before a preview can be shown!","")}function y(e){e.preventDefault();var t=(0,r.getSelectOptionByName)("available-cardsets"),n=u();(0,a.pAddCardToCardset)(n,t).then(function(e){$(".form-add-card")[0].reset(),l(),$("#card-types").formSelect(),M.updateTextFields(),v(),(0,a.storageClearPictureData)(),(0,i.showToast)(e,"")}).catch(function(e){(0,i.showToast)(e,"")})}function b(e){e.preventDefault(),(0,a.storageClearPictureData)(),v()}},,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){(r=JSON.parse(sessionStorage.getItem("editingCard")))&&function(e){var t=function(e){return{typeAnswer:"checkbox-type-answer",answer:(t=e.answer,n=e.type,{SA:"card-answer",MC:"card-answer-mc",TF:t?"answer-true":"answer-false"}[n]),title:"card-name",type:"card-types",answerChoices:"card-possible-mc",question:"card-question",image:"imageName"};var t,n}(e);for(var n in e)if(e.hasOwnProperty(n)){var r=$("#".concat(t[n])),o=r.prop("nodeName");switch(o){case"INPUT":"checkbox"===r.prop("type")?r.prop("checked",e[n]):r.val(e[n]);break;case"SELECT":r.val(e[n]).formSelect().change();break;case"A":r.click();break;case"SPAN":e[n]&&(localStorage.setItem(a.KEYS.PICTURE,JSON.stringify(e[n])),(0,i.updateImageSpan)())}}}(r),r&&($(".btn-add-card").text("Update card").find("i").text("update"),$(".form-add-card").off().on("submit",c))};var r,o=n(1),a=n(0),i=n(7);function c(e){e.preventDefault();var t=(0,i.getCardFromInput)();t.id=r.id,(0,a.pUpdateCard)(t).then(function(e){(0,o.showToast)(e,"")}).catch(function(e){(0,o.showToast)(e,"")})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllAvailableLanguages=function(){var e="https://translate.yandex.net/api/v1.5/tr.json/getLangs?key=".concat(o,"&ui=nl");return(0,r.postData)(e).then(function(e){if(e){if(!e.hasOwnProperty("code"))return e;throw Error("Failed to translate, reason: "+e.message)}throw Error("Failed to receive a response from the translation service.")})},t.translate=function(e,t){var n="https://translate.yandex.net/api/v1.5/tr.json/translate?key=".concat(o,"&text=").concat(e,"&lang=").concat(t);return(0,r.postData)(n).then(function(e){if(e){if(200===e.code)return e;throw Error("Failed to translate, reason: "+e.message)}throw Error("Failed to receive a response from the translation service.")})};var r=n(0),o="trnsl.1.1.20180519T143130Z.2169786538de90eb.23ca89f814d0ef54f6ee93e5b62d6ae557db4856"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){(0,r.isOnline)()||(0,o.showToast)(i.OFFLINE,""),$(".btn-translate-modal").on("click",l),$(".btn-translate-input").on("click",u),$("#card-question").on("input",d),$(".translate-decline").on("click",c),$(".modal-close").on("click",s)};var r=n(2),o=n(1),a=n(20),i={OFFLINE:"Offline mode detected, translation features have been disabled!"};function c(e){e.preventDefault(),$("#card-answer").val("")}function s(){$("#translateModal").find("input:not(.dropdown-trigger)").val("")}function u(e){e.preventDefault(),function(e,t){var n=$(".progressbar");(0,r.isEmpty)(e)||(n.removeClass("hidden"),(0,a.translate)(e,t).then(function(e){$("#card-ouput-t").val(e.text[0]),$("#card-answer").val(e.text[0]),n.addClass("hidden")}).catch(function(e){n.addClass("hidden"),(0,o.showToast)(e,"")}))}($.trim($("#card-input-t").val()),(0,r.getSelectOptionByName)("available-languages"))}function l(e){e.preventDefault();var t=$("#translateModal");$("#card-input-t").val($("#card-question").val()),(0,a.getAllAvailableLanguages)().then(function(e){$("#available-languages").html((0,o.object2options)(e.langs)).formSelect()}).then(function(){t.modal().modal("open")})}function d(e){e.preventDefault(),$(".btn-translate-modal").attr("disabled",(0,r.isEmpty)($(this).val())||!(0,r.isOnline)())}},function(e,t,n){"use strict";var r=n(7),o=n(21),a=n(19),i=n(0);$(document).ready(function(){(0,i.init)(),(0,r.init)(),(0,a.init)(),(0,o.init)()}),$(window).on("beforeunload",function(){(0,i.storageClearPictureData)(),sessionStorage.removeItem("editingCard")})}]);