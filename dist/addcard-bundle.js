!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){d.getItem(i.CARDSETS).then(function(e){if(!e)return console.log("Cardsets storage doesn't exist, creating new storage space..."),d.setItem(i.CARDSETS,new Map)}).then(function(){d.getItem(i.HIGHSCORES).then(function(e){if(!e)return console.log("Highscores storage spaces doesn't exist, creating storage space..."),d.setItem(i.HIGHSCORES,[])})}).catch(function(e){throw Error("Failed to initialize cardset storage space")})},t.setHighscoresArr=function(e){return d.setItem(i.HIGHSCORES,e)},t.pGetAllCardsets=l,t.pUpdateCardset=u,t.pRenameCardset=function(e,t){return l().then(function(e,t){return function(n){if(!t.isValid())throw Error(c.INVALID_NAME_CATEGORY);var r=n.get(e);return n.delete(e),n.set(t.name,r),n.forEach(function(n){n.name===e&&(n.name=t.name,n.category=t.category,n.cards.forEach(function(e){e.id=t.name+"-"+e.id.split("-")[1]}))}),n}}(e,t)).then(function(e){return h(e)}).then(function(t){return Promise.resolve("Successfully edited the cardset ".concat(e,"!"))}).catch(function(t){throw console.error(t),Error("Failed to update name and category of the cardset ".concat(e))})},t.pAddHighscore=function(e){return d.getItem(i.HIGHSCORES).then(function(t){if(!t)throw Error("There is no highscore object in the database!");return t.push(e),t}).then(function(e){return d.setItem(i.HIGHSCORES,e)}).then(function(){return Promise.resolve("Successfully added highscore entry!")})},t.rebuildHighscores=f,t.pGetAllHighscores=function(){return d.getItem(i.HIGHSCORES).then(function(e){return f(e)}).catch(function(e){throw Error("Failed to get all highscores!")})},t.pSetCardsetMap=h,t.pAddUpdateCardset=p,t.pAddCardset=function(e){return l().then(function(t){if(!e.isValid())throw Error(c.INVALID_CARDSET);var n,a,s=t.values(),i=!0,o=!1,d=void 0;try{for(var l,u=s[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var f=l.value;if(n=f,a=e,(0,r.isEqualToCaseInsensitive)(n.name,a.name))throw Error(c.CARDSET_ALREADY_EXISTS)}}catch(e){o=!0,d=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw d}}return e}).then(function(e){return p(e)})},t.pDeleteCardFromCardset=function(e){return m(e.split("-")[0]).then(function(t){return t.cards=t.cards.filter(function(t){return t.id!==e}),t}).then(function(e){return p(e)}).catch(function(e){throw Error(c.DELETE_CARD_FROM_CARDSET_FAIL)})},t.pDeleteCardset=function(e){return l().then(function(t){return t.delete(e),d.setItem(i.CARDSETS,t),t})},t.pAddCardToCardset=function(e,t){return m(t).then(function(t){if(!e.isValid())throw Error(c.INVALID_CARD_DETAILS);return e.id=t.name+"-"+t.cards.length,t.addCard(e),t}).then(function(e){return p(e)}).then(function(){return Promise.resolve("Sucessfully added card to the ".concat(t," cardset!"))})},t.pUpdateCard=function(e){if(!e.id)throw Error("Card does not have an ID set!");return m(e.id.split("-")[0]).then(function(t){return t.cards=t.cards.filter(function(t){return t.id!==e.id}),t.cards.push(e),t}).then(function(e){return u(e)}).then(function(){return Promise.resolve("Successfully updated the card ".concat(e.title,"!"))}).catch(function(e){throw Error("Failed to update card!")})},t.pGetCardByID=function(e){return m(e.split("-")[0]).then(function(t){return t.cards.filter(function(t){return t.id===e})[0]}).catch(function(e){throw Error(c.GET_CARD_BY_ID_FAIL)})},t.pGetCardset=m,t.postData=function(e){return fetch(e,{headers:{"content-type":"application/x-www-form-urlencoded"},method:"POST"}).then(function(e){return e.json()})},t.pFileReader=function(e){var t=this;return new Promise(function(n,r){var a=new FileReader;a.onload=function(t){e.data=t.target.result,n(e)},a.onerror=function(){return r(t)},/^image/.test(e.type)?a.readAsDataURL(e):a.readAsText(e)})},t.storageSavePicture=function(e){try{localStorage.setItem(o.PICTURE,JSON.stringify(e))}catch(e){if(1014===e.code||22===e.code)throw Error("File size too big, please upload a smaller file!");throw Error("Failed to upload file, please try again!")}},t.storageGetLoadedPicture=function(){try{return JSON.parse(localStorage.getItem(o.PICTURE))}catch(e){throw new Error("Failed to get picture!")}},t.storageClearPictureData=function(){try{localStorage.removeItem(o.PICTURE)}catch(e){throw Error("Failed to remove the picture from storage!")}},t.startCurrentGame=function(e){return m(e.toString()).then(function(t){if(0===t.cards.length)throw Error("Cardset ".concat(e," has no cards!"));return e}).then(function(t){return d.setItem(o.GAME,e.toString())})},t.getCurrentGame=function(){return d.getItem(o.GAME)},t.getCurrentCard=function(){return d.getItem(o.CARD)},t.getSettings=function(){return window.localStorage?JSON.parse(localStorage.getItem(o.SETTINGS)):null},t.saveSettings=function(e){window.localStorage?(localStorage.setItem(o.SETTINGS,JSON.stringify(e)),(0,a.showToast)("Successfully saved settings!","")):(0,a.showToast)("Settings are not supported by your browser!","")},t.setCurrentEditedCardset=function(e){sessionStorage.setItem(o.CURRENT_CARDSET,e)},t.KEYS=void 0;var r=n(2),a=n(1),s=n(3),i={STORE:"cardStorage",CARDSETS:"cardSets",HIGHSCORES:"highscores"},o={PICTURE:"cardPicture",GAME:"currentGame",CARD:"editCard",SETTINGS:"settings",USERNAME:"username",CURRENT_CARDSET:"currentCardset"};t.KEYS=o;var c={INVALID_NAME_CATEGORY:"Please enter a valid name and category!",INVALID_CARDSET:"The cardset name or category is not valid!",INVALID_CARD_DETAILS:"The card details are not valid!",CARDSET_ALREADY_EXISTS:"A cardset with the same name already exists!",CARD_DB_FAIL:"Failed to get card from the database!",CARD_ADD_FAIL:"Failed to add card to cardset!",CARDSET_ADD_FAIL:"Failed to add cardset to the database!",DELETE_CARD_FROM_CARDSET_FAIL:"Failed to delete card from the cardset!",STORE_SETTINGS:"Failed to store settings!",LOAD_SETTINGS:"Failed to load settings from the database!",GET_CARD_BY_ID_FAIL:"Failed to get card by ID!"},d=localforage.createInstance({name:i.STORE});function l(){return d.getItem(i.CARDSETS).then(function(e){return e?(e.forEach((t=e,function(e,n){var r=Object.assign(new s.CardSet,e);r.cards=r.cards.map(function(e){return Object.assign(new s.Card,e)}),t.set(n,r)})),e):new Map;var t})}function u(e){return l().then(function(t){return t.set(e.name,e),t}).then(function(e){return h(e)}).then(function(t){return Promise.resolve("Successfully updated the cardset ".concat(e.name,"!"))}).catch(function(t){throw console.error(t),Error("Failed to update the cardset ".concat(e.name,"!"))})}function f(e){return e.map(function(e){return Object.assign(new s.Highscore,e)})}function h(e){return d.setItem(i.CARDSETS,e)}function p(e){return l().then(function(t){return t.set(e.name,e),d.setItem(i.CARDSETS,t)}).then(function(){return Promise.resolve("Successfully added the ".concat(e.name," cardset!"))}).catch(function(e){throw console.log(e),Error(c.CARDSET_ADD_FAIL)})}function m(e){return l().then(function(t){return t.get(e)?t.get(e):null}).catch(function(e){throw Error(c.CARD_DB_FAIL)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadingSpinner=function(){return $('<div class="preloader-background">\n        <div class="preloader-wrapper active">\n            <div class="spinner-layer spinner-blue-only">\n                <div class="circle-clipper left">\n                    <div class="circle"></div>\n                </div>\n                <div class="gap-patch">\n                    <div class="circle"></div>\n                </div>\n                <div class="circle-clipper right">\n                    <div class="circle"></div>\n                </div>\n            </div>\n        </div>\n    </div>')},t.generateModal=function(e,t,n,r,a,i){(function(e,t,n,r){var a='<div id="'.concat(e,'" class="modal">\n                    <div class="modal-content">\n                        ').concat(t,'\n                    </div>\n                    <div class="modal-footer">\n                        <a href="#/" id="modal-').concat(e,"-").concat(n,'" class="modal-close waves-effect waves-green btn-flat btn1">').concat(n,'</a>\n                        <a href="#/" id="modal-').concat(e,"-").concat(r,'" class="modal-close waves-effect waves-green btn-flat btn2">').concat(r,"</a>\n                    </div>\n                </div>");$("body").append($(a))})(e,t,n,r),$("#modal-".concat(e,"-").concat(r)).on("click",a),$("#modal-".concat(e,"-").concat(n)).on("click",i);var o=$("#".concat(e));M.Modal.init(o[0],{onCloseEnd:s,preventScrolling:!0}),o.modal("open")},t.object2options=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+='<option value="'.concat(n,'">').concat(e[n],"</option>"));return t},t.updateGameCardLayout=function(e){var t=e.getCurrentCard();$(".card-name").text(t.title),$(".card-qa").text(e.isFront?t.question:t.answer),$(".card-side").text(e.isFront?r.FRONT:r.BACK),$(".gameCardsAnswered").text("Answered: ".concat(e.getAnsweredCards().length,"/").concat(e.cardset.cards.length)),$(".gameCardsCorrectlyAnswered").text("Correct: ".concat(e.getCorrectCards().length,"/").concat(e.cardset.cards.length)),$(".currentCard").text("".concat(e.currentCardIndex+1,"/").concat(e.cardset.cards.length)),function(e){var t=e.getCurrentCard(),n=$(".smiley");n.removeClass("faint-black").removeClass("green-text").removeClass("red-text");var r="faint-black",a="sentiment_neutral";e.hasBeenAnswered(t)&&e.hasBeenCorrectlyAnswered(t)?(a="sentiment_very_satisfied",r="green-text"):e.hasBeenAnswered(t)&&(a="sentiment_very_dissatisfied",r="red-text");n.text(a).addClass(r)}(e),i=e.hasBeenAnswered(t),$(".answerControls").find(".btn").each(function(){i?$(this).addClass("disabled"):$(this).removeClass("disabled")}),$("#game-type-answer").prop("disabled",i),function(e){var t=e.getCurrentCard();$(".card-play-image").remove();var n=$(".card-content .img-wrapper");t.image&&e.isFront&&n.append(function(e){return $('<img class="card-play-image responsive-img" src="'.concat(e.image?e.image.data:"",'" alt="').concat(e.title,'-image">'))}(t))}(e),n=t,s=$(".answerControls"),s.find(".control").addClass("hidden"),s.find(a[n.typeAnswer?"TA":n.type]).removeClass("hidden"),"MC"===n.type&&function(e){$(".radioAnswerButtons").html(function(e){var t="";return e.isMultipleChoice()&&e.answerChoices.forEach(function(e,n){t+='<label class="btn-block">\n                            <input value="'.concat(n,'" class="with-gap" name="radioAnswer" type="radio" />\n                            <span>').concat(e,"</span>\n                        </label>")}),t}(e))}(n);var n,s;var i},t.showToast=function(e,t){M.toast({html:e,classes:t})};var r={CHOOSE_CARDSET:"Choose a cardset",NO_CARDSETS:"No cardsets have been created yet!",FRONT:"FRONT",BACK:"BACK",OFFLINE:"Currently working offline!"};var a={SA:".singleAnswerControls",TF:".trueFalseControls",MC:".multipleChoiceControls",TA:".typeAnswerControls"};function s(){$(this)[0].$el.remove()}},function(e,t,n){"use strict";function r(e,t){return"string"==typeof e&&"string"==typeof t?e.toLowerCase()===t.toLowerCase():e===t}function a(e){return"string"==typeof e?e.toLowerCase():e}Object.defineProperty(t,"__esModule",{value:!0}),t.isEmpty=function(e){if(null===e||void 0===e)return!0;if("string"==typeof e)return 0===$.trim(e).length;return!1},t.isEqualToCaseInsensitive=r,t.isInArrayLowerCase=function(e,t){return e.some(function(e){return r(e,t)})},t.removeDuplicatesArray=function(e){return function(e){var t=e.length;for(;t>0;){var n=Math.floor(Math.random()*t),r=e[--t];e[t]=e[n],e[n]=r}return e}(e.map(a).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]))},t.getUniqueValuesOfObjectsInMap=function(e,t){var n=[];return e.forEach(function(e){n.indexOf(e[t])<0&&n.push(e[t])}),n},t.scrollToBottom=function(){$("html,body").animate({scrollTop:document.body.scrollHeight},"fast")},t.cardsetNameComparator=function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0},t.validateSelect=function(){$("select[required]").css({display:"block",height:0,padding:0,width:0,position:"absolute"})},t.getSelectOptionByName=function(e){return $('select[name="'.concat(e,'"]')).find("option:selected").val()},t.isOnline=function(){return navigator.onLine},t.fDefault=function(e){return void e.preventDefault()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Card=c,t.Game=d,t.CardSet=l,t.Image=function(e,t){this.name=e,this.data=t},t.Highscore=u;var r=n(2),a=n(1),s=n(0),i=n(4),o={SA:"Single Answer",TF:"True or False",MC:"Multiple Choice"};function c(e,t,n,r){this.id=null,this.title=e,this.type=t,this.question=n,this.image=null,this.answer=r,this.guess=null,this.answerChoices=null,this.typeAnswer=!1}function d(e){this.cardset=e,this.currentCardIndex=0,this.isFront=!0,this.timeFinished=null}function l(e,t){this.name=e,this.category=t,this.cards=[]}function u(e,t,n,r){this.date=n,this.realTime=r,this.game=e}c.prototype.clearGuess=function(){this.guess=null},d.prototype.reset=function(){this.currentCardIndex=0,this.isFront=!0,this.timeFinished=null,this.cardset.cards.forEach(function(e){return e.clearGuess()})},d.prototype.nextCard=function(){this.cardset.cards.length>0&&(this.currentCardIndex+1<=this.cardset.cards.length-1?this.currentCardIndex++:this.currentCardIndex=0)},d.prototype.prevCard=function(){this.cardset.cards.length>0&&(this.currentCardIndex-1>=0?this.currentCardIndex--:this.currentCardIndex=this.cardset.cards.length-1)},d.prototype.answer=function(e){this.getCurrentCard().guess=e},d.prototype.isFinished=function(){return this.getAmountCards()===this.getAnsweredCards().length},d.prototype.getCorrectCards=function(){return this.getAnsweredCards().filter(function(e){return!0===e.isCorrectAnswer()})},d.prototype.getAmountCorrectAnswers=function(){return this.getCorrectCards().length},d.prototype.getAnswerAccuracy=function(){return Math.round(this.getCorrectCards().length/this.cardset.cards.length*100)},d.prototype.getAmountWrongAnswers=function(){return this.getAmountCards()-this.getAmountCorrectAnswers()},d.prototype.getAmountCards=function(){return this.cardset.cards.length},d.prototype.getAnsweredCards=function(){return this.cardset.cards.filter(function(e){return null!==e.guess})},d.prototype.hasBeenCorrectlyAnswered=function(e){return this.getCorrectCards().filter(function(t){return t.id===e.id}).length>0},d.prototype.hasBeenAnswered=function(e){return this.getAnsweredCards().filter(function(t){return t.id===e.id}).length>0},d.prototype.getCurrentCard=function(){return this.cardset.cards[this.currentCardIndex]},c.prototype.renderCompact=function(){return'<div id="'.concat(this.id,'" data-card="').concat(this.id,'" class="card">\n                <a href="#" class="faint-black delete-card-collection-item"><i class="delete material-icons">delete</i></a>\n                <a href="#/" class="faint-black edit-card-collection-item"><i class="edit material-icons">edit</i></a>\n                ').concat(this.image?'<a href="#" class="faint-black image-card-collection-item"><i class="photo material-icons">photo</i></a>':"",'\n                <div class="card-content">\n                    <span class="card-title compact-title">').concat(this.title,"</span>\n                    <p>Q: ").concat(this.question,'</p>\n                    <p class="answer">A: ').concat(this.answer,'</p>\n                    <p class="answers">').concat(this.isMultipleChoice()?'<p class="choices">'.concat(this.answerChoices.join(","),"</p>"):"",'</p>\n                    <p class="type">').concat(o[this.type],'</p>\n                    <p class="typing type keyboard">').concat(this.typeAnswer?'<i class="material-icons">keyboard</i>':"","</p>\n                </div>   \n            </div>")},c.prototype.render=function(){var e='<div id="'.concat(this.id,'" class="card">\n                               <a href="#/" class="faint-black delete-card-collection-item"><i class="delete material-icons">delete</i></a>\n                               <a href="#/" class="faint-black edit-card-collection-item"><i class="edit material-icons">edit</i></a>\n                               <div class="card-content">\n                                    <span class="card-title">').concat(this.title,"</span>");return this.image&&(e+='<div class="center">\n                                  <img class="responsive-img" src="'.concat(this.image.data,'" alt="card-image" title="card-image"">\n                           </div>')),e+="<p>Q: ".concat(this.question,'</p>\n                                </div>\n                                <div class="card-action">\n                                    <p class="answer">A: ').concat(this.answer,'</p>\n                                    <p class="answers">').concat(this.isMultipleChoice()?'<p class="choices">\n                                                                '.concat(this.answerChoices.join(","),"\n                                                                </p>"):"",'</p>\n                                    <p class="type">').concat(o[this.type],'</p>\n                                    <p class="typing type keyboard">').concat(this.typeAnswer?'<i class="material-icons">keyboard</i>':"","</p>\n                                </div>\n                            </div>")},c.prototype.isCorrectAnswer=function(){return(0,r.isEqualToCaseInsensitive)(this.answer,this.guess)},c.prototype.isMultipleChoice=function(){return"MC"===this.type||Array.isArray(this.answerChoices)},c.prototype.isValid=function(){return!((0,r.isEmpty)(this.title)||(0,r.isEmpty)(this.type)||(0,r.isEmpty)(this.question)||(0,r.isEmpty)(this.answer))},l.prototype.addCard=function(e){this.cards.push(e)},l.prototype.render=function(){var e='\n                <section class="cardset" data-cardset="'.concat(this.name,'" data-category="').concat(this.category,'">\n                    <ul class="collapsible">\n                        <li ').concat((0,i.startsCollapsed)()?"":'class="active"','>\n                    <div class="collapsible-header">\n                    <i class="material-icons">folder</i>').concat(this.name,'\n                    <a href="#/" class="faint-black home-hide-cardset"><i class="material-icons">arrow_drop_up</i></a>\n\n                    <div class="collapsible-items">\n                        <a href="#/" class="faint-black home-add-cardset"><i class="material-icons">add</i></a>\n                        <a href="#/" class="faint-black home-edit-cardset"><i class="material-icons">edit</i></a>\n                        <a href="#/" class="faint-black home-delete-cardset"><i class="material-icons">delete</i></a>\n                        <a href="#/" class="faint-black home-play-cardset"><i class="material-icons">play_arrow</i></a>\n                    </div>\n                        \n                  \n                </div>\n                <div class="collapsible-body">');return this.cards.forEach(function(t){return e+=(0,i.isCompactViewEnabled)()?t.renderCompact():t.render()}),0===this.cards.length&&(e+='<span class="center">No cards have been added yet, tap the <i class="material-icons">add</i> button to add a card!</span>'),e+="</div>\n                       </li>\n                    </ul>\n                </section>"},l.prototype.isValid=function(){return!(0,r.isEmpty)(this.name)&&!(0,r.isEmpty)(this.category)},u.prototype.save=function(e){(0,s.pAddHighscore)(this).then(e).catch(function(e){(0,a.showToast)(e,"")})},u.prototype.render=function(){var e="<tr>\n            <td>".concat(this.game.cardset.name,"</td>\n            <td>").concat(this.game.timeFinished,"</td>\n            <td>").concat(this.date.slice(0,-5)," ").concat(this.realTime.slice(0,-3),"</td>\n            <td></td>\n            <td></td>\n            <td></td>\n        </tr>");return this.game.cardset.cards.forEach(function(t){e+="<tr>\n                <td></td>\n                <td>".concat((0,r.isEqualToCaseInsensitive)(t.guess,t.answer)?'<i class="material-icons">check</i>':'<i class="material-icons">close</i>',"</td>\n                <td></td>\n                <td>").concat(t.title,"</td>\n                <td>").concat(t.guess,"</td>\n                <td>").concat(t.answer,"</td>\n            </tr>")}),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){e=(0,s.getSettings)(),e&&e.forEach(function(e){return $("input[name='".concat(e.name,"']")).prop("checked",e.value)}),$(".form-save-settings").on("submit",p),$(".btn-clear-highscores").on("click",d).next().on("click",l).next().on("click",c);var e},t.startsCollapsed=function(){return(0,s.getSettings)()&&(0,s.getSettings)().filter(function(e){return e.name===i.START_COLLAPSED}).length>0},t.isCompactViewEnabled=function(){return(0,s.getSettings)()&&(0,s.getSettings)().filter(function(e){return e.name===i.COMPACT_VIEW}).length>0};var r=n(1),a=n(2),s=n(0),i={START_COLLAPSED:"startCollapsed",COMPACT_VIEW:"compactViewEnabled"},o={DELETE_ALL_DATA:"Are you sure you wish to clear all data? This includes all highscore data and all card related data such as all cardsets and cards!",DELETE_HIGHSCORE_DATA:"Are you sure you wish to clear all highscore related data?",DELETE_CARD_DATA:"Are you sure you wish to clear all card related data? This includes all cardsets and cards in these cardsets"};function c(e){e.preventDefault();var t="<p>".concat(o.DELETE_ALL_DATA,"</p>");(0,r.generateModal)("clearAllDataModal",t,"Cancel","Confirm",h,a.fDefault)}function d(e){e.preventDefault();var t="<p>".concat(o.DELETE_HIGHSCORE_DATA,"</p>");(0,r.generateModal)("clearAllDataModal",t,"Cancel","Confirm",u,a.fDefault)}function l(e){e.preventDefault();var t="<p>".concat(o.DELETE_CARD_DATA,"</p>");(0,r.generateModal)("clearAllDataModal",t,"Cancel","Confirm",f,a.fDefault)}function u(e){e.preventDefault(),(0,s.setHighscoresArr)([]).then(function(){(0,r.showToast)("Successfully cleared all highscore data!","")}).catch(function(e){(0,r.showToast)("Failed to clear highscore data!","")})}function f(e){e.preventDefault(),(0,s.pSetCardsetMap)(new Map).then(function(){(0,r.showToast)("Successfully cleared all card data!","")}).catch(function(){(0,r.showToast)("Failed to clear card data!","")})}function h(e){e.preventDefault(),f(e),u(e)}function p(e){e.preventDefault(),(0,s.saveSettings)($(this).serializeArray())}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){l(),(0,r.validateSelect)(),$(".form-add-card").on("submit",v),$(".link-check-form").on("click",f),$(".answer-false").on("click",h).next().on("click",h),$("select[name='card-types']").on("change",p),$("#input-card-picture").on("change",g),$(".btn-preview-card").on("click",C),$(".clear-loaded-image").on("click",y)},t.getCardFromInput=d,t.updateImageSpan=m;var r=n(2),a=n(3),s=n(0),i=n(1),o={SA:".singleAnswer",TF:".trueFalse",MC:".multipleChoice"},c={NO_CARDSETS:"No cardsets have been created yet!"};function d(){var e=$("#card-name").val(),t=function(e){switch(e){case"TF":return $(".trueFalse").find("a:not(.grey)").data("value");case"MC":return $.trim($("#card-answer-mc").val());case"SA":return $.trim($("#card-answer").val())}}((0,r.getSelectOptionByName)("card-types")),n=(0,r.getSelectOptionByName)("card-types"),i=$("#card-question").val(),o=new a.Card(e,n,i,t);return o.typeAnswer=$("#checkbox-type-answer").prop("checked"),o.image=JSON.parse(localStorage.getItem(s.KEYS.PICTURE)),o.isMultipleChoice()&&(o.answerChoices=function(e,t){var n=e.split(",").map(function(e){return $.trim(e)}).filter(function(e){return!(0,r.isEmpty)(e)});(0,r.isInArrayLowerCase)(n,t)||n.push(t);return(0,r.removeDuplicatesArray)(n)}($("#card-possible-mc").val(),t)),o}function l(){var e;(0,s.pGetAllCardsets)().then(u).then((e=$("select[name='available-cardsets']"),function(t){if(e.html(t),sessionStorage.getItem("currentCardset")){var n=sessionStorage.getItem("currentCardset");e.find("option").filter(function(e,t){$(t).val()===n&&$(t).prop("selected",!0)})}e.formSelect()})).catch(function(e){return console.log(e)})}function u(e){var t="";return t+=0!==e.size?"":'<option value="" disabled selected>'.concat(c.NO_CARDSETS,"</option>"),e.forEach(function(e){t+='<option value="'.concat(e.name,'">').concat(e.name," (").concat(e.cards.length," cards)</option>")}),t}function f(e){e.preventDefault(),$(".btn-add-card").click()}function h(e){e.preventDefault(),$(this).toggleClass("grey"),$(this).siblings().hasClass("grey")||$(this).siblings().addClass("grey")}function p(e){var t,n;t=$(this).find("option:selected").val(),(n=$(".formAnswerInput")).find("input:not([type='checkbox']), select").prop("required",!1),n.find(".answerInput").addClass("hidden"),n.find(o[t]).removeClass("hidden").find("input:not([type='checkbox']), select").prop("required",!0)}function m(){var e=$("#imageName"),t=(0,s.storageGetLoadedPicture)();t?e.text(t.name).addClass("green-text").next().removeClass("hidden"):(e.removeClass("green-text").text("none"),e.next().addClass("hidden"))}function g(e){var t=$(this)[0].files[0];(0,s.pFileReader)(t).then(function(e){return new a.Image(e.name,e.data)}).then(function(e){(0,s.storageSavePicture)(e),m()}).catch(function(e){(0,i.showToast)(e,"")})}function C(e){e.preventDefault();var t=d();t.isValid()?function(e){var t="<h4>Preview</h4>\n                        ".concat(e.render());(0,i.generateModal)("previewModal",t,"","Close",r.fDefault,r.fDefault)}(t):(0,i.showToast)("All fields must be filled in before a preview can be shown!","")}function v(e){e.preventDefault();var t=(0,r.getSelectOptionByName)("available-cardsets"),n=d();(0,s.pAddCardToCardset)(n,t).then(function(e){$(".form-add-card")[0].reset(),l(),$("#card-types").formSelect(),M.updateTextFields(),m(),(0,s.storageClearPictureData)(),(0,i.showToast)(e,"")}).catch(function(e){(0,i.showToast)(e,"")})}function y(e){e.preventDefault(),(0,s.storageClearPictureData)(),m()}},,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){(r=JSON.parse(sessionStorage.getItem("editingCard")))&&function(e){var t=function(e){return{typeAnswer:"checkbox-type-answer",answer:(t=e.answer,n=e.type,{SA:"card-answer",MC:"card-answer-mc",TF:t?"answer-true":"answer-false"}[n]),title:"card-name",type:"card-types",answerChoices:"card-possible-mc",question:"card-question",image:"imageName"};var t,n}(e);for(var n in e)if(e.hasOwnProperty(n)){var r=$("#".concat(t[n])),a=r.prop("nodeName");switch(a){case"INPUT":"checkbox"===r.prop("type")?r.prop("checked",e[n]):r.val(e[n]);break;case"SELECT":r.val(e[n]).formSelect().change();break;case"A":r.click();break;case"SPAN":e[n]&&(localStorage.setItem(s.KEYS.PICTURE,JSON.stringify(e[n])),(0,i.updateImageSpan)())}}}(r),r&&($(".btn-add-card").text("Update card").find("i").text("update"),$(".form-add-card").off().on("submit",o))};var r,a=n(1),s=n(0),i=n(7);function o(e){e.preventDefault();var t=(0,i.getCardFromInput)();t.id=r.id,(0,s.pUpdateCard)(t).then(function(e){(0,a.showToast)(e,"")}).catch(function(e){(0,a.showToast)(e,"")})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllAvailableLanguages=function(){var e="https://translate.yandex.net/api/v1.5/tr.json/getLangs?key=".concat(a,"&ui=nl");return(0,r.postData)(e).then(function(e){if(e){if(!e.hasOwnProperty("code"))return e;throw Error("Failed to translate, reason: "+e.message)}throw Error("Failed to receive a response from the translation service.")})},t.translate=function(e,t){var n="https://translate.yandex.net/api/v1.5/tr.json/translate?key=".concat(a,"&text=").concat(e,"&lang=").concat(t);return(0,r.postData)(n).then(function(e){if(e){if(200===e.code)return e;throw Error("Failed to translate, reason: "+e.message)}throw Error("Failed to receive a response from the translation service.")})};var r=n(0),a="trnsl.1.1.20180519T143130Z.2169786538de90eb.23ca89f814d0ef54f6ee93e5b62d6ae557db4856"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){(0,r.isOnline)()||(0,a.showToast)(i.OFFLINE,""),$(".btn-translate-modal").on("click",l),$(".btn-translate-input").on("click",d),$("#card-question").on("input",u),$(".translate-decline").on("click",o),$(".modal-close").on("click",c)};var r=n(2),a=n(1),s=n(20),i={OFFLINE:"Offline mode detected, translation features have been disabled!"};function o(e){e.preventDefault(),$("#card-answer").val("")}function c(){$("#translateModal").find("input:not(.dropdown-trigger)").val("")}function d(e){e.preventDefault(),function(e,t){var n=$(".progressbar");(0,r.isEmpty)(e)||(n.removeClass("hidden"),(0,s.translate)(e,t).then(function(e){$("#card-ouput-t").val(e.text[0]),$("#card-answer").val(e.text[0]),n.addClass("hidden")}).catch(function(e){n.addClass("hidden"),(0,a.showToast)(e,"")}))}($.trim($("#card-input-t").val()),(0,r.getSelectOptionByName)("available-languages"))}function l(e){e.preventDefault();var t=$("#translateModal");$("#card-input-t").val($("#card-question").val()),(0,s.getAllAvailableLanguages)().then(function(e){$("#available-languages").html((0,a.object2options)(e.langs)).formSelect()}).then(function(){t.modal().modal("open")})}function u(e){e.preventDefault(),$(".btn-translate-modal").attr("disabled",(0,r.isEmpty)($(this).val())||!(0,r.isOnline)())}},function(e,t,n){"use strict";var r=n(7),a=n(21),s=n(19),i=n(0);$(document).ready(function(){(0,i.init)(),(0,r.init)(),(0,s.init)(),(0,a.init)()}),$(window).on("beforeunload",function(){(0,i.storageClearPictureData)(),sessionStorage.removeItem("editingCard")})}]);