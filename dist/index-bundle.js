!function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=10)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=function(){l.getItem(c.CARDSETS).then(function(t){if(!t)return console.log("Cardsets storage doesn't exist, creating new storage space..."),l.setItem(c.CARDSETS,new Map)}).then(function(){l.getItem(c.HIGHSCORES).then(function(t){if(!t)return console.log("Highscores storage spaces doesn't exist, creating storage space..."),l.setItem(c.HIGHSCORES,[])})}).catch(function(t){throw Error("Failed to initialize cardset storage space")})},e.setHighscoresArr=function(t){return l.setItem(c.HIGHSCORES,t)},e.pGetAllCardsets=d,e.pUpdateCardset=u,e.pRenameCardset=function(t,e){return d().then(function(t,e){return function(n){if(!e.isValid())throw Error(s.INVALID_NAME_CATEGORY);var r=n.get(t);return n.delete(t),n.set(e.name,r),n.forEach(function(n){n.name===t&&(n.name=e.name,n.category=e.category,n.cards.forEach(function(t){t.id=e.name+"-"+t.id.split("-")[1]}))}),n}}(t,e)).then(function(t){return h(t)}).then(function(e){return Promise.resolve("Successfully edited the cardset ".concat(t,"!"))}).catch(function(e){throw console.error(e),Error("Failed to update name and category of the cardset ".concat(t))})},e.pAddHighscore=function(t){return l.getItem(c.HIGHSCORES).then(function(e){if(!e)throw Error("There is no highscore object in the database!");return e.push(t),e}).then(function(t){return l.setItem(c.HIGHSCORES,t)}).then(function(){return Promise.resolve("Successfully added highscore entry!")})},e.rebuildHighscores=f,e.pGetAllHighscores=function(){return l.getItem(c.HIGHSCORES).then(function(t){return f(t)}).catch(function(t){throw Error("Failed to get all highscores!")})},e.pSetCardsetMap=h,e.pAddUpdateCardset=p,e.pAddCardset=function(t){return d().then(function(e){if(!t.isValid())throw Error(s.INVALID_CARDSET);var n,a,i=e.values(),c=!0,o=!1,l=void 0;try{for(var d,u=i[Symbol.iterator]();!(c=(d=u.next()).done);c=!0){var f=d.value;if(n=f,a=t,(0,r.isEqualToCaseInsensitive)(n.name,a.name))throw Error(s.CARDSET_ALREADY_EXISTS)}}catch(t){o=!0,l=t}finally{try{c||null==u.return||u.return()}finally{if(o)throw l}}return t}).then(function(t){return p(t)})},e.pDeleteCardFromCardset=function(t){return m(t.split("-")[0]).then(function(e){return e.cards=e.cards.filter(function(e){return e.id!==t}),e}).then(function(t){return p(t)}).catch(function(t){throw Error(s.DELETE_CARD_FROM_CARDSET_FAIL)})},e.pDeleteCardset=function(t){return d().then(function(e){return e.delete(t),l.setItem(c.CARDSETS,e),e})},e.pAddCardToCardset=function(t,e){return m(e).then(function(e){if(!t.isValid())throw Error(s.INVALID_CARD_DETAILS);return t.id=e.name+"-"+e.cards.length,e.addCard(t),e}).then(function(t){return p(t)}).then(function(){return Promise.resolve("Sucessfully added card to the ".concat(e," cardset!"))})},e.pUpdateCard=function(t){if(!t.id)throw Error("Card does not have an ID set!");return m(t.id.split("-")[0]).then(function(e){return e.cards=e.cards.filter(function(e){return e.id!==t.id}),e.cards.push(t),e}).then(function(t){return u(t)}).then(function(){return Promise.resolve("Successfully updated the card ".concat(t.title,"!"))}).catch(function(t){throw Error("Failed to update card!")})},e.pGetCardByID=function(t){return m(t.split("-")[0]).then(function(e){return e.cards.filter(function(e){return e.id===t})[0]}).catch(function(t){throw Error(s.GET_CARD_BY_ID_FAIL)})},e.pGetCardset=m,e.postData=function(t){return fetch(t,{headers:{"content-type":"application/x-www-form-urlencoded"},method:"POST"}).then(function(t){return t.json()})},e.pFileReader=function(t){var e=this;return new Promise(function(n,r){var a=new FileReader;a.onload=function(e){t.data=e.target.result,n(t)},a.onerror=function(){return r(e)},/^image/.test(t.type)?a.readAsDataURL(t):a.readAsText(t)})},e.storageSavePicture=function(t){try{localStorage.setItem(o.PICTURE,JSON.stringify(t))}catch(t){if(1014===t.code||22===t.code)throw Error("File size too big, please upload a smaller file!");throw Error("Failed to upload file, please try again!")}},e.storageGetLoadedPicture=function(){try{return JSON.parse(localStorage.getItem(o.PICTURE))}catch(t){throw new Error("Failed to get picture!")}},e.storageClearPictureData=function(){try{localStorage.removeItem(o.PICTURE)}catch(t){throw Error("Failed to remove the picture from storage!")}},e.startCurrentGame=function(t){return m(t.toString()).then(function(e){if(0===e.cards.length)throw Error("Cardset ".concat(t," has no cards!"));return t}).then(function(e){return l.setItem(o.GAME,t.toString())})},e.getCurrentGame=function(){return l.getItem(o.GAME)},e.getCurrentCard=function(){return l.getItem(o.CARD)},e.getSettings=function(){return window.localStorage?JSON.parse(localStorage.getItem(o.SETTINGS)):null},e.saveSettings=function(t){window.localStorage?(localStorage.setItem(o.SETTINGS,JSON.stringify(t)),(0,a.showToast)("Successfully saved settings!","")):(0,a.showToast)("Settings are not supported by your browser!","")},e.setCurrentEditedCardset=function(t){sessionStorage.setItem(o.CURRENT_CARDSET,t)},e.KEYS=void 0;var r=n(2),a=n(1),i=n(3),c={STORE:"cardStorage",CARDSETS:"cardSets",HIGHSCORES:"highscores"},o={PICTURE:"cardPicture",GAME:"currentGame",CARD:"editCard",SETTINGS:"settings",USERNAME:"username",CURRENT_CARDSET:"currentCardset"};e.KEYS=o;var s={INVALID_NAME_CATEGORY:"Please enter a valid name and category!",INVALID_CARDSET:"The cardset name or category is not valid!",INVALID_CARD_DETAILS:"The card details are not valid!",CARDSET_ALREADY_EXISTS:"A cardset with the same name already exists!",CARD_DB_FAIL:"Failed to get card from the database!",CARD_ADD_FAIL:"Failed to add card to cardset!",CARDSET_ADD_FAIL:"Failed to add cardset to the database!",DELETE_CARD_FROM_CARDSET_FAIL:"Failed to delete card from the cardset!",STORE_SETTINGS:"Failed to store settings!",LOAD_SETTINGS:"Failed to load settings from the database!",GET_CARD_BY_ID_FAIL:"Failed to get card by ID!"},l=localforage.createInstance({name:c.STORE});function d(){return l.getItem(c.CARDSETS).then(function(t){return t?(t.forEach((e=t,function(t,n){var r=Object.assign(new i.CardSet,t);r.cards=r.cards.map(function(t){return Object.assign(new i.Card,t)}),e.set(n,r)})),t):new Map;var e})}function u(t){return d().then(function(e){return e.set(t.name,t),e}).then(function(t){return h(t)}).then(function(e){return Promise.resolve("Successfully updated the cardset ".concat(t.name,"!"))}).catch(function(e){throw console.error(e),Error("Failed to update the cardset ".concat(t.name,"!"))})}function f(t){return t.map(function(t){return Object.assign(new i.Highscore,t)})}function h(t){return l.setItem(c.CARDSETS,t)}function p(t){return d().then(function(e){return e.set(t.name,t),l.setItem(c.CARDSETS,e)}).then(function(){return Promise.resolve("Successfully added the ".concat(t.name," cardset!"))}).catch(function(t){throw console.log(t),Error(s.CARDSET_ADD_FAIL)})}function m(t){return d().then(function(e){return e.get(t)?e.get(t):null}).catch(function(t){throw Error(s.CARD_DB_FAIL)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loadingSpinner=function(){return $('<div class="preloader-background">\n        <div class="preloader-wrapper active">\n            <div class="spinner-layer spinner-blue-only">\n                <div class="circle-clipper left">\n                    <div class="circle"></div>\n                </div>\n                <div class="gap-patch">\n                    <div class="circle"></div>\n                </div>\n                <div class="circle-clipper right">\n                    <div class="circle"></div>\n                </div>\n            </div>\n        </div>\n    </div>')},e.generateModal=function(t,e,n,r,a,c){(function(t,e,n,r){var a='<div id="'.concat(t,'" class="modal">\n                    <div class="modal-content">\n                        ').concat(e,'\n                    </div>\n                    <div class="modal-footer">\n                        <a href="#/" id="modal-').concat(t,"-").concat(n,'" class="modal-close waves-effect waves-green btn-flat btn1">').concat(n,'</a>\n                        <a href="#/" id="modal-').concat(t,"-").concat(r,'" class="modal-close waves-effect waves-green btn-flat btn2">').concat(r,"</a>\n                    </div>\n                </div>");$("body").append($(a))})(t,e,n,r),$("#modal-".concat(t,"-").concat(r)).on("click",a),$("#modal-".concat(t,"-").concat(n)).on("click",c);var o=$("#".concat(t));M.Modal.init(o[0],{onCloseEnd:i,preventScrolling:!0}),o.modal("open")},e.object2options=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e+='<option value="'.concat(n,'">').concat(t[n],"</option>"));return e},e.updateGameCardLayout=function(t){var e=t.getCurrentCard();$(".card-name").text(e.title),$(".card-qa").text(t.isFront?e.question:e.answer),$(".card-side").text(t.isFront?r.FRONT:r.BACK),$(".gameCardsAnswered").text("Answered: ".concat(t.getAnsweredCards().length,"/").concat(t.cardset.cards.length)),$(".gameCardsCorrectlyAnswered").text("Correct: ".concat(t.getCorrectCards().length,"/").concat(t.cardset.cards.length)),$(".currentCard").text("".concat(t.currentCardIndex+1,"/").concat(t.cardset.cards.length)),function(t){var e=t.getCurrentCard(),n=$(".smiley");n.removeClass("faint-black").removeClass("green-text").removeClass("red-text");var r="faint-black",a="sentiment_neutral";t.hasBeenAnswered(e)&&t.hasBeenCorrectlyAnswered(e)?(a="sentiment_very_satisfied",r="green-text"):t.hasBeenAnswered(e)&&(a="sentiment_very_dissatisfied",r="red-text");n.text(a).addClass(r)}(t),c=t.hasBeenAnswered(e),$(".answerControls").find(".btn").each(function(){c?$(this).addClass("disabled"):$(this).removeClass("disabled")}),$("#game-type-answer").prop("disabled",c),function(t){var e=t.getCurrentCard();$(".card-play-image").remove();var n=$(".card-content .img-wrapper");e.image&&t.isFront&&n.append(function(t){return $('<img class="card-play-image responsive-img" src="'.concat(t.image?t.image.data:"",'" alt="').concat(t.title,'-image">'))}(e))}(t),n=e,i=$(".answerControls"),i.find(".control").addClass("hidden"),i.find(a[n.typeAnswer?"TA":n.type]).removeClass("hidden"),"MC"===n.type&&function(t){$(".radioAnswerButtons").html(function(t){var e="";return t.isMultipleChoice()&&t.answerChoices.forEach(function(t,n){e+='<label class="btn-block">\n                            <input value="'.concat(n,'" class="with-gap" name="radioAnswer" type="radio" />\n                            <span>').concat(t,"</span>\n                        </label>")}),e}(t))}(n);var n,i;var c},e.showToast=function(t,e){M.toast({html:t,classes:e})};var r={CHOOSE_CARDSET:"Choose a cardset",NO_CARDSETS:"No cardsets have been created yet!",FRONT:"FRONT",BACK:"BACK",OFFLINE:"Currently working offline!"};var a={SA:".singleAnswerControls",TF:".trueFalseControls",MC:".multipleChoiceControls",TA:".typeAnswerControls"};function i(){$(this)[0].$el.remove()}},function(t,e,n){"use strict";function r(t,e){return"string"==typeof t&&"string"==typeof e?t.toLowerCase()===e.toLowerCase():t===e}function a(t){return"string"==typeof t?t.toLowerCase():t}Object.defineProperty(e,"__esModule",{value:!0}),e.isEmpty=function(t){if(null===t||void 0===t)return!0;if("string"==typeof t)return 0===$.trim(t).length;return!1},e.isEqualToCaseInsensitive=r,e.isInArrayLowerCase=function(t,e){return t.some(function(t){return r(t,e)})},e.removeDuplicatesArray=function(t){return function(t){var e=t.length;for(;e>0;){var n=Math.floor(Math.random()*e),r=t[--e];t[e]=t[n],t[n]=r}return t}(t.map(a).reduce(function(t,e){return t.indexOf(e)<0&&t.push(e),t},[]))},e.getUniqueValuesOfObjectsInMap=function(t,e){var n=[];return t.forEach(function(t){n.indexOf(t[e])<0&&n.push(t[e])}),n},e.scrollToBottom=function(){$("html,body").animate({scrollTop:document.body.scrollHeight},"fast")},e.cardsetNameComparator=function(t,e){return t.name.toLowerCase()<e.name.toLowerCase()?-1:t.name.toLowerCase()>e.name.toLowerCase()?1:0},e.validateSelect=function(){$("select[required]").css({display:"block",height:0,padding:0,width:0,position:"absolute"})},e.getSelectOptionByName=function(t){return $('select[name="'.concat(t,'"]')).find("option:selected").val()},e.isOnline=function(){return navigator.onLine},e.fDefault=function(t){return void t.preventDefault()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Card=s,e.Game=l,e.CardSet=d,e.Image=function(t,e){this.name=t,this.data=e},e.Highscore=u;var r=n(2),a=n(1),i=n(0),c=n(4),o={SA:"Single Answer",TF:"True or False",MC:"Multiple Choice"};function s(t,e,n,r){this.id=null,this.title=t,this.type=e,this.question=n,this.image=null,this.answer=r,this.guess=null,this.answerChoices=null,this.typeAnswer=!1}function l(t){this.cardset=t,this.currentCardIndex=0,this.isFront=!0,this.timeFinished=null}function d(t,e){this.name=t,this.category=e,this.cards=[]}function u(t,e,n,r){this.date=n,this.realTime=r,this.game=t}s.prototype.clearGuess=function(){this.guess=null},l.prototype.reset=function(){this.currentCardIndex=0,this.isFront=!0,this.timeFinished=null,this.cardset.cards.forEach(function(t){return t.clearGuess()})},l.prototype.nextCard=function(){this.cardset.cards.length>0&&(this.currentCardIndex+1<=this.cardset.cards.length-1?this.currentCardIndex++:this.currentCardIndex=0)},l.prototype.prevCard=function(){this.cardset.cards.length>0&&(this.currentCardIndex-1>=0?this.currentCardIndex--:this.currentCardIndex=this.cardset.cards.length-1)},l.prototype.answer=function(t){this.getCurrentCard().guess=t},l.prototype.isFinished=function(){return this.getAmountCards()===this.getAnsweredCards().length},l.prototype.getCorrectCards=function(){return this.getAnsweredCards().filter(function(t){return!0===t.isCorrectAnswer()})},l.prototype.getAmountCorrectAnswers=function(){return this.getCorrectCards().length},l.prototype.getAnswerAccuracy=function(){return Math.round(this.getCorrectCards().length/this.cardset.cards.length*100)},l.prototype.getAmountWrongAnswers=function(){return this.getAmountCards()-this.getAmountCorrectAnswers()},l.prototype.getAmountCards=function(){return this.cardset.cards.length},l.prototype.getAnsweredCards=function(){return this.cardset.cards.filter(function(t){return null!==t.guess})},l.prototype.hasBeenCorrectlyAnswered=function(t){return this.getCorrectCards().filter(function(e){return e.id===t.id}).length>0},l.prototype.hasBeenAnswered=function(t){return this.getAnsweredCards().filter(function(e){return e.id===t.id}).length>0},l.prototype.getCurrentCard=function(){return this.cardset.cards[this.currentCardIndex]},s.prototype.renderCompact=function(){return'<div id="'.concat(this.id,'" data-card="').concat(this.id,'" class="card">\n                <a href="#" class="faint-black delete-card-collection-item"><i class="delete material-icons">delete</i></a>\n                <a href="#/" class="faint-black edit-card-collection-item"><i class="edit material-icons">edit</i></a>\n                ').concat(this.image?'<a href="#" class="faint-black image-card-collection-item"><i class="photo material-icons">photo</i></a>':"",'\n                <div class="card-content">\n                    <span class="card-title compact-title">').concat(this.title,"</span>\n                    <p>Q: ").concat(this.question,'</p>\n                    <p class="answer">A: ').concat(this.answer,'</p>\n                    <p class="answers">').concat(this.isMultipleChoice()?'<p class="choices">'.concat(this.answerChoices.join(","),"</p>"):"",'</p>\n                    <p class="type">').concat(o[this.type],'</p>\n                    <p class="typing type keyboard">').concat(this.typeAnswer?'<i class="material-icons">keyboard</i>':"","</p>\n                </div>   \n            </div>")},s.prototype.render=function(){var t='<div id="'.concat(this.id,'" class="card">\n                               <a href="#/" class="faint-black delete-card-collection-item"><i class="delete material-icons">delete</i></a>\n                               <a href="#/" class="faint-black edit-card-collection-item"><i class="edit material-icons">edit</i></a>\n                               <div class="card-content">\n                                    <span class="card-title">').concat(this.title,"</span>");return this.image&&(t+='<div class="center">\n                                  <img class="responsive-img" src="'.concat(this.image.data,'" alt="card-image" title="card-image"">\n                           </div>')),t+="<p>Q: ".concat(this.question,'</p>\n                                </div>\n                                <div class="card-action">\n                                    <p class="answer">A: ').concat(this.answer,'</p>\n                                    <p class="answers">').concat(this.isMultipleChoice()?'<p class="choices">\n                                                                '.concat(this.answerChoices.join(","),"\n                                                                </p>"):"",'</p>\n                                    <p class="type">').concat(o[this.type],'</p>\n                                    <p class="typing type keyboard">').concat(this.typeAnswer?'<i class="material-icons">keyboard</i>':"","</p>\n                                </div>\n                            </div>")},s.prototype.isCorrectAnswer=function(){return(0,r.isEqualToCaseInsensitive)(this.answer,this.guess)},s.prototype.isMultipleChoice=function(){return"MC"===this.type||Array.isArray(this.answerChoices)},s.prototype.isValid=function(){return!((0,r.isEmpty)(this.title)||(0,r.isEmpty)(this.type)||(0,r.isEmpty)(this.question)||(0,r.isEmpty)(this.answer))},d.prototype.addCard=function(t){this.cards.push(t)},d.prototype.render=function(){var t='\n                <section class="cardset" data-cardset="'.concat(this.name,'" data-category="').concat(this.category,'">\n                    <ul class="collapsible">\n                        <li ').concat((0,c.startsCollapsed)()?"":'class="active"','>\n                    <div class="collapsible-header">\n                    <i class="material-icons">folder</i>').concat(this.name,'\n                    <a href="#/" class="faint-black home-hide-cardset"><i class="material-icons">arrow_drop_up</i></a>\n\n                    <div class="collapsible-items">\n                        <a href="#/" class="faint-black home-add-cardset"><i class="material-icons">add</i></a>\n                        <a href="#/" class="faint-black home-edit-cardset"><i class="material-icons">edit</i></a>\n                        <a href="#/" class="faint-black home-delete-cardset"><i class="material-icons">delete</i></a>\n                        <a href="#/" class="faint-black home-play-cardset"><i class="material-icons">play_arrow</i></a>\n                    </div>\n                        \n                  \n                </div>\n                <div class="collapsible-body">');return this.cards.forEach(function(e){return t+=(0,c.isCompactViewEnabled)()?e.renderCompact():e.render()}),0===this.cards.length&&(t+='<span class="center">No cards have been added yet, tap the <i class="material-icons">add</i> button to add a card!</span>'),t+="</div>\n                       </li>\n                    </ul>\n                </section>"},d.prototype.isValid=function(){return!(0,r.isEmpty)(this.name)&&!(0,r.isEmpty)(this.category)},u.prototype.save=function(t){(0,i.pAddHighscore)(this).then(t).catch(function(t){(0,a.showToast)(t,"")})},u.prototype.render=function(){var t="<tr>\n            <td>".concat(this.game.cardset.name,"</td>\n            <td>").concat(this.game.timeFinished,"</td>\n            <td>").concat(this.date.slice(0,-5)," ").concat(this.realTime.slice(0,-3),"</td>\n            <td></td>\n            <td></td>\n            <td></td>\n        </tr>");return this.game.cardset.cards.forEach(function(e){t+="<tr>\n                <td></td>\n                <td>".concat((0,r.isEqualToCaseInsensitive)(e.guess,e.answer)?'<i class="material-icons">check</i>':'<i class="material-icons">close</i>',"</td>\n                <td></td>\n                <td>").concat(e.title,"</td>\n                <td>").concat(e.guess,"</td>\n                <td>").concat(e.answer,"</td>\n            </tr>")}),t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=function(){t=(0,i.getSettings)(),t&&t.forEach(function(t){return $("input[name='".concat(t.name,"']")).prop("checked",t.value)}),$(".form-save-settings").on("submit",p),$(".btn-clear-highscores").on("click",l).next().on("click",d).next().on("click",s);var t},e.startsCollapsed=function(){return(0,i.getSettings)()&&(0,i.getSettings)().filter(function(t){return t.name===c.START_COLLAPSED}).length>0},e.isCompactViewEnabled=function(){return(0,i.getSettings)()&&(0,i.getSettings)().filter(function(t){return t.name===c.COMPACT_VIEW}).length>0};var r=n(1),a=n(2),i=n(0),c={START_COLLAPSED:"startCollapsed",COMPACT_VIEW:"compactViewEnabled"},o={DELETE_ALL_DATA:"Are you sure you wish to clear all data? This includes all highscore data and all card related data such as all cardsets and cards!",DELETE_HIGHSCORE_DATA:"Are you sure you wish to clear all highscore related data?",DELETE_CARD_DATA:"Are you sure you wish to clear all card related data? This includes all cardsets and cards in these cardsets"};function s(t){t.preventDefault();var e="<p>".concat(o.DELETE_ALL_DATA,"</p>");(0,r.generateModal)("clearAllDataModal",e,"Cancel","Confirm",h,a.fDefault)}function l(t){t.preventDefault();var e="<p>".concat(o.DELETE_HIGHSCORE_DATA,"</p>");(0,r.generateModal)("clearAllDataModal",e,"Cancel","Confirm",u,a.fDefault)}function d(t){t.preventDefault();var e="<p>".concat(o.DELETE_CARD_DATA,"</p>");(0,r.generateModal)("clearAllDataModal",e,"Cancel","Confirm",f,a.fDefault)}function u(t){t.preventDefault(),(0,i.setHighscoresArr)([]).then(function(){(0,r.showToast)("Successfully cleared all highscore data!","")}).catch(function(t){(0,r.showToast)("Failed to clear highscore data!","")})}function f(t){t.preventDefault(),(0,i.pSetCardsetMap)(new Map).then(function(){(0,r.showToast)("Successfully cleared all card data!","")}).catch(function(){(0,r.showToast)("Failed to clear card data!","")})}function h(t){t.preventDefault(),f(t),u(t)}function p(t){t.preventDefault(),(0,i.saveSettings)($(this).serializeArray())}},,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=d;var r=n(3),a=n(0),i=n(1),c=n(2),o={ALL:"ALL"},s={LI_ALL_TAB:'<li data-category="ALL" class="tab"><a href="#tab-all">ALL</a></li>',UL_EMPTY_CARDSET:'<ul class="collection with-header collection-cardsets">\n                <li class="center collection-item">No cardsets have been created yet, tap the <i class="material-icons">create_new_folder</i> button to add a cardset!<li>\n                <li class="center sick-blue"><a style="display:block; padding-top: 5px;"class="white-text" href="addcardset.html">\n                    <i class="material-icons">create_new_folder</i>\n                        </a></li>\n                </ul>',ADD_CARDSET_BUTTON:'<section>\n                <ul class="collapsible">\n                    <li class="collection-item center-align sick-blue"><a style="display:block; padding-top: 5px;"class="white-text" href="addcardset.html">\n                    <i class="material-icons">create_new_folder</i>\n                        </a></li>\n                </ul>\n                </section>'},l={GAME_PAGE:"cardgame.html",ADD_CARD_PAGE:"addcard.html"};function d(){var t=$(".tabs"),e=$(".cards");v(e,o.ALL),u(),t.on("click",".tab",I),e.on("click",".delete-card-collection-item",b),e.on("click",".edit-card-collection-item",L),e.on("click",".image-card-collection-item",R)}function u(){(0,a.pGetAllCardsets)().then(h).then(f).catch(function(t){return console.log(t,"")})}function f(t){var e=$(s.LI_ALL_TAB),n=$(".tabs");n.hasClass("initalized")&&(n.removeClass("initalized"),n.tabs("destroy")),n.html("").append(e).append(t).addClass("initalized").tabs().tabs("select","tab-all")}function h(t){var e=(0,c.getUniqueValuesOfObjectsInMap)(t,"category").sort();return $(e.map(function(t){return'<li data-category="'.concat(t,'" class="tab"><a href="#tab-filtered">').concat(t,"</a></li>")}).join(""))}function p(t){return function(e){return Array.from(e.values()).filter(function(t){return function(e){return e.category===t||t===o.ALL}}(t)).sort(c.cardsetNameComparator)}}function m(t){return t.map(function(t){return t.render()}).join("")}function g(t){return $(".card-view").addClass("hidden"),$("main .row").append((0,i.loadingSpinner)()),t}function C(){$(".preloader-background").fadeOut("slow",function(){$(".card-view").removeClass("hidden"),$(this).remove()})}function v(t,e){(0,a.pGetAllCardsets)().then(g).then(p(e)).then(m).then(function(t){return function(e){(0,c.isEmpty)(e)?($(".cards").html(s.UL_EMPTY_CARDSET),$(".cards-filtered").html("")):(e+=s.ADD_CARDSET_BUTTON,t.html(e))}}(t)).then(_).then(C).catch(function(t){return console.log(t)})}function A(t){t.preventDefault(),t.stopPropagation();var e=$(this).parents("section").data("cardset");(0,a.setCurrentEditedCardset)(e),window.location.href=l.ADD_CARD_PAGE}function y(t,e){var n="<h5>Cardset ".concat(t,'</h5>\n            <p>Enter a new name:</p>\n            <div class="input-field">\n                <label class="active" for="newName">New name:</label>\n                <input type="text" value="').concat(t,'" name="cardset-newName" id="cardset-newName">\n            </div>\n            <div class="input-field">\n                <label class="active" for="newName">New category:</label>\n                <input  type="text" value="').concat(e,'" name="cardset-newCategory" id="cardset-newCategory">\n            </div>');(0,i.generateModal)("editCardsetNameModal",n,"Decline","Confirm",function(t){return function(e){e.preventDefault();var n=$("#cardset-newName").val(),c=$("#cardset-newCategory").val(),s=new r.CardSet(n,c);(0,a.pRenameCardset)(t,s).then(function(t){v($(".cards"),o.ALL),u($(".tabs"))}).catch(function(t){return(0,i.showToast)(t,"")})}}(t),c.fDefault)}function w(t){t.preventDefault(),t.stopPropagation(),y($(this).parents(".cardset").data("cardset"),$(this).parents(".cardset").data("category"))}function E(t,e){var n="<h5>".concat(e,'</h5>\n        <p>Are you sure you want to delete the card "').concat(e,'" from the cardset "').concat(t.split("-")[0],'"?</p>');(0,i.generateModal)("deleteModal",n,"Decline","Confirm",function(t){return function(e){(0,a.pDeleteCardFromCardset)(t).then(function(t){return d()}).catch(function(t){return(0,i.showToast)(t,"")})}}(t))}function S(t){t.preventDefault(),t.stopPropagation();var e=$(this).parents(".cardset").data("cardset").toString(),n="<p>Are you sure you wish to delete the cardset ".concat(e,"?</p>");(0,i.generateModal)("deleteCardsetModal",n,"Decline","Confirm",function(t){return function(e){(0,a.pDeleteCardset)(t).then(function(t){return d()})}}(e),c.fDefault)}function D(t){t.preventDefault(),t.stopPropagation();var e=$(this).parents("section").data("cardset");(0,a.startCurrentGame)(e).then(function(t){window.location.href=l.GAME_PAGE}).catch(function(t){return(0,i.showToast)(t,"")})}function _(){$(".collapsible").collapsible(),$(".collapsible-header").off().on("click",T),$(".home-add-cardset").off().on("click",A).next().off().on("click",w).next().off().on("click",S).next().off().on("click",D)}function T(t){t.preventDefault(),$(this).toggleClass("closed"),$(this).find("a.home-hide-cardset").find("i").text($(this).hasClass("closed")?"arrow_drop_down":"arrow_drop_up")}function b(t){t.preventDefault(),E($(this).parent().attr("id"),$(this).siblings(".card-content").find(".card-title").text())}function I(t){t.preventDefault();var e=$(this).data("category");v($(".cards-filtered"),e)}function R(t){t.preventDefault();var e=$(this).parent().data("card");(0,a.pGetCardByID)(e).then(function(t){return t.image}).then(function(t){var e='<img class="responsive-img" src="'.concat(t.data,'" alt="card-image" title="card-image"/>');(0,i.generateModal)("imageModal",e,"","Close",c.fDefault,c.fDefault)}).catch(function(t){(0,i.showToast)(t,"")})}function L(t){t.preventDefault();var e=$(this).parent().attr("id");(0,a.pGetCardByID)(e).then(function(t){return sessionStorage.setItem("editingCard",JSON.stringify(t)),t}).then(function(t){window.location.href=l.ADD_CARD_PAGE}).catch(function(t){return(0,i.showToast)(t,"")})}},function(t,e,n){"use strict";var r=n(9),a=n(0);$(document).ready(function(){(0,a.init)(),(0,r.init)()})}]);